global=window,global.TO_DELETE=null,global.CONFIG={isDevMode:!1},global.METHOD=function(e){"use strict";var t,n,o=function(e,t){return void 0!==n?n(e,t):void 0};return o.type=METHOD,t="function"==typeof e?e(o):e,void 0!==t&&(n=t.run),o},global.CLASS=METHOD(function(e){"use strict";var t,n=0;return e.getInstanceId=t=function(){return n+=1,n-1},{run:function(e){var n,o,i,r,a,u,c,s=function(e,n){var o={},i={};return i.type=s,i.checkIsInstanceOf=function(e){for(var t=s;void 0!==t;){if(t===e)return!0;t=t.mom}return!1},i.id=t(),e=u(o,i,e,n),c(o,i,e,n),i};return s.type=CLASS,s.innerInit=u=function(e,t,n,a){var u,c,d,l=function(e,t){EACH(t,function(t,n){void 0===e[n]?e[n]=t:CHECK_IS_DATA(e[n])===!0&&CHECK_IS_DATA(t)===!0&&l(e[n],t)})};return void 0!==r&&(void 0===n?n=r(s):CHECK_IS_DATA(n)===!0?(c=r(s),void 0!==c&&l(n,c)):(d=n,n=r(s))),void 0!==o&&(u=o(n,a),void 0!==u&&(s.mom=u,u.type===CLASS?u.innerInit(e,t,n,a):u.type.innerInit(e,t,n,a))),void 0!==i&&i(e,t,void 0===d?n:d,a),n},n="function"==typeof e?e(s):e,void 0!==n&&(o=n.preset,i=n.init,r=n.params,a=n.afterInit),s.innerAfterInit=c=function(e,t,n,o){var i=s.mom;void 0!==i&&(i.type===CLASS?i.innerAfterInit(e,t,n,o):i.type.innerAfterInit(e,t,n,o)),void 0!==a&&a(e,t,n,o)},s}}}),global.OBJECT=METHOD(function(e){"use strict";var t,n,o,i,r=[],a=!1;return t=function(e){var t=e.type,n={},o={};e.id=CLASS.getInstanceId(),t.innerInit(n,e,o),t.innerAfterInit(n,e,o)},n=function(e){a===!0?t(e):r.push(e)},e.removeReadyObject=o=function(e){REMOVE({array:r,value:e})},e.initObjects=i=function(){EACH(r,function(e){t(e)}),a=!0},{run:function(e){var t=CLASS(e),o={};return o.type=t,o.checkIsInstanceOf=function(e){for(var n=t;void 0!==n;){if(n===e)return!0;n=n.mom}return!1},n(o),o}}}),global.INIT_OBJECTS=METHOD({run:function(){"use strict";OBJECT.initObjects()}}),global.BOX=METHOD(function(e){"use strict";var t,n={};return e.getBoxes=t=function(){return n},{run:function(e){var t=function(e){var n,o=e.split(".");return EACH(o,function(e){void 0===n?(void 0===t[e]&&(t[e]={}),n=t[e]):(void 0===n[e]&&(n[e]={}),n=n[e])}),n},o=e.split("."),i=global,r="";return t.boxName=e,t.type=BOX,n[e]=t,EACH(o,function(e,n){r+=(""===r?"":".")+e,n<o.length-1?i=void 0!==i[e]?i[e]:i[e]={}:i[e]=t}),FOR_BOX.inject(t),t}}}),global.FOR_BOX=METHOD(function(e){"use strict";var t,n=[];return e.inject=t=function(e){EACH(n,function(t){t(e)})},{run:function(e){EACH(BOX.getBoxes(),function(t){e(t)}),n.push(e)}}}),global.NEXT=METHOD({run:function(e,t){"use strict";var n,o,i;void 0===t&&(t=e,e=void 0),void 0!==e&&(CHECK_IS_ARRAY(e)!==!0?n=e:o=e),REPEAT({start:t.length-1,end:0},function(e){var r;0!==e&&void 0===i?i=t[e]():e>0?(r=i,i=t[e](r),i.next=r):(r=i,void 0===r&&(r=function(){}),i=t[e],void 0!==n?RUN(function(){var e=-1;RUN(function(t){e+=1,n>e+1?i(e,t):i(e,r)})}):void 0!==o?RUN(function(){var e=o.length,t=-1;0===e?r():RUN(function(n){t+=1,e>t+1?(o.length===e-1&&(t-=1,e-=1),i(o[t],n,t)):i(o[t],r,t)})}):i(r))})}}),global.OVERRIDE=METHOD({run:function(e,t){"use strict";void 0!==e.type&&e.type.type===CLASS&&OBJECT.removeReadyObject(e),t(e)}}),global.PARALLEL=METHOD({run:function(e,t){"use strict";var n,o,i=0;void 0===t&&(t=e,e=void 0),void 0!==e&&(CHECK_IS_ARRAY(e)!==!0?n=e:o=e),void 0!==n?0===n?t[1]():REPEAT(n,function(e){t[0](e,function(){i+=1,i===n&&t[1]()})}):void 0!==o?0===o.length?t[1]():EACH(o,function(e,n){t[0](e,function(){i+=1,i===o.length&&t[1]()},n)}):RUN(function(){var e=t.length-1;EACH(t,function(n,o){e>o&&n(function(){i+=1,i===e&&t[e]()})})})}}),global.PARSE_STR=METHOD({run:function(e){"use strict";var t;try{return t=JSON.parse(e),CHECK_IS_DATA(t)===!0?UNPACK_DATA(t):t}catch(n){return void 0}}}),global.RANDOM_STR=METHOD({run:function(e){"use strict";var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789";return REPEAT(e,function(){t+=n.charAt(RANDOM({limit:n.length}))}),t}}),global.STRINGIFY=METHOD({run:function(e){"use strict";return JSON.stringify(CHECK_IS_DATA(e)===!0?PACK_DATA(e):e)}}),global.TEST=METHOD(function(){"use strict";var e=0;return{run:function(t,n){n(function(n){var o,i={};n===!0?console.log("["+t+" TEST] SUCCESS! "+e+" error(s) founded."):(i.__THROW_ERROR_$$$=function(){try{throw Error()}catch(e){return e}},o=i.__THROW_ERROR_$$$().stack,void 0!==o&&(o=o.substring(o.indexOf("__THROW_ERROR_$$$")),o=o.split("\n")[2],o=o.substring(o.indexOf("at "))),e+=1,console.log("["+t+" TEST] ERROR! "+o+" "+e+" error(s) founded."))})}}}),global.URI_MATCHER=CLASS({init:function(e,t,n){"use strict";var o,i=CLASS({init:function(e,t,o){var i,r,a,u=o.split("/"),c={},s=function(e){var t=e.split("/");return EACH(u,function(e,n){var o=t[n];if("**"===o)return i=!0,!1;if(void 0===o)return!1;if(""!==e&&"{"===o.charAt(0)&&"}"===o.charAt(o.length-1))c[o.substring(1,o.length-1)]=e;else if("*"!==o&&o!==e)return!1;return n===u.length-1&&n<t.length-1&&""!==t[t.length-1]?!1:void 0})===!0||i===!0};i=CHECK_IS_ARRAY(n)===!0?EACH(n,function(e){return s(e)!==!0})!==!0:s(n),t.checkIsMatched=r=function(){return i},t.getURIParams=a=function(){return c}}});t.check=o=function(e){return i(e)}}}),global.VALID=CLASS(function(e){"use strict";var t,n,o,i,r,a,u,c,s,d,l,f,E,v,g,m,h,A,T,S,p;return e.notEmpty=t=function(e){var t=void 0===e||e===TO_DELETE?"":String(e);return CHECK_IS_ARRAY(e)===!0||""!==t.trim()},e.regex=n=function(e){var t=e.pattern,n=String(e.value);return n===n.match(t)[0]},e.size=o=function(e){var t=e.min,n=e.max,o=String(e.value),i=o.length;return void 0===t&&(t=0),i>=t&&(void 0===n||n>=i)},e.integer=i=function(e){var n=String(e);return t(n)===!0&&n.match(/^(?:-?(?:0|[1-9][0-9]*))$/)!==TO_DELETE},e.real=r=function(e){var n=String(e);return t(n)===!0&&n.match(/^(?:-?(?:0|[1-9][0-9]*))?(?:\.[0-9]*)?$/)!==TO_DELETE},e.bool=a=function(e){var t=String(e);return"true"===t||"false"===t},e.date=u=function(e){var t=String(e),n=Date.parse(t);return isNaN(n)===!1},e.min=c=function(e){var t=e.min,n=e.value;return r(n)===!0&&n>=t},e.max=s=function(e){var t=e.max,n=e.value;return r(n)===!0&&t>=n},e.email=d=function(e){return"string"==typeof e&&t(e)===!0&&e.match(/^(?:[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+\.)*[\w\!\#\$\%\&\'\*\+\-\/\=\?\^\`\{\|\}\~]+@(?:(?:(?:[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!\.)){0,61}[a-zA-Z0-9]?\.)+[a-zA-Z0-9](?:[a-zA-Z0-9\-](?!$)){0,61}[a-zA-Z0-9]?)|(?:\[(?:(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\.){3}(?:[01]?\d{1,2}|2[0-4]\d|25[0-5])\]))$/)!==TO_DELETE},e.png=l=function(e){return"string"==typeof e&&t(e)===!0&&e.match(/^data:image\/png;base64,/)!==TO_DELETE},e.url=f=function(e){return"string"==typeof e&&t(e)===!0&&e.match(/^(?:(?:ht|f)tp(?:s?)\:\/\/|~\/|\/)?(?:\w+:\w+@)?((?:(?:[-\w\d{1-3}]+\.)+(?:com|org|net|gov|mil|biz|info|mobi|name|aero|jobs|edu|co\.uk|ac\.uk|it|fr|tv|museum|asia|local|travel|[a-z]{2}))|((\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)(\.(\b25[0-5]\b|\b[2][0-4][0-9]\b|\b[0-1]?[0-9]?[0-9]\b)){3}))(?::[\d]{1,5})?(?:(?:(?:\/(?:[-\w~!$+|.,=]|%[a-f\d]{2})+)+|\/)+|\?|#)?(?:(?:\?(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)(?:&(?:[-\w~!$+|.,*:]|%[a-f\d{2}])+=?(?:[-\w~!$+|.,*:=]|%[a-f\d]{2})*)*)*(?:#(?:[-\w~!$ |\/.,*:;=]|%[a-f\d]{2})*)?$/i)!==TO_DELETE&&e.length<=2083},e.username=E=function(e){return"string"==typeof e&&t(e)===!0&&e.match(/^[_a-zA-Z0-9\-]+$/)!==TO_DELETE},e.id=v=function(e){return"string"==typeof e&&t(e)===!0&&e.match(/[0-9a-f]{24}/)!==TO_DELETE&&24===e.length},e.one=g=function(e){var t=e.array,n=e.value;return EACH(t,function(e){return n===e?!1:void 0})===!1},e.array=m=function(e){return CHECK_IS_ARRAY(e)===!0},e.data=h=function(e){return CHECK_IS_DATA(e)===!0},e.element=A=function(e){var t=e.array,n=VALID({_:e.validData});return EACH(t,function(e){return n.check({_:e}).checkHasError()===!0?!1:void 0})===!0},e.property=T=function(e){var t=e.data,n=VALID({_:e.validData});return EACH(t,function(e){return n.check({_:e}).checkHasError()===!0?!1:void 0})===!0},e.detail=S=function(e){var t=e.data,n=VALID(e.validDataSet);return n.check(t).checkHasError()!==!0},e.equal=p=function(e){var t=e.value,n=String(t),o=e.validValue,i=String(o);return n===i},{init:function(n,o,i){var r,a,u,c=CLASS({init:function(n,o,r){var a,u,c=r.data,s=r.isForUpdate,d=!1,l={};EACH(i,function(n,o){n!==!0&&EACH(n,function(n,i){var r=c[o];if(s===!0&&void 0===r)return!1;if("notEmpty"!==i&&t(r)!==!0)return c[o]=s===!0?TO_DELETE:void 0,!0;if("one"===i){if(g({array:n,value:r})===!1)return d=!0,l[o]={type:i,array:n,value:r},!1}else if("element"===i){if(A({validData:n,array:r})===!1)return d=!0,l[o]={type:i,validData:n,array:r},!1}else if("property"===i){if(T({validData:n,data:r})===!1)return d=!0,l[o]={type:i,validData:n,data:r},!1}else if("detail"===i){if(S({validDataSet:n,data:r})===!1)return d=!0,l[o]={type:i,validDataSet:n,data:r},!1}else if("size"===i){if(e[i](COMBINE(CHECK_IS_DATA(n)===!0?[n,{value:r}]:[{min:n,max:n},{value:r}]))===!1)return d=!0,l[o]={type:i,validParams:n,value:r},!1}else if("regex"===i){if(e[i]({pattern:n,value:r})===!1)return d=!0,l[o]={type:i,validParam:n,value:r},!1}else if("min"===i){if(e[i]({min:n,value:r})===!1)return d=!0,l[o]={type:i,validParam:n,value:r},!1}else if("max"===i){if(e[i]({max:n,value:r})===!1)return d=!0,l[o]={type:i,validParam:n,value:r},!1}else if("equal"===i){if(e[i]({value:r,validValue:n})===!1)return d=!0,l[o]={type:i,validParam:n,value:r},!1}else if(n===!0&&e[i](r)===!1)return d=!0,l[o]={type:i,value:r},!1;t(r)===!0&&"string"==typeof r&&("integer"===i?c[o]=INTEGER(r):"real"===i?c[o]=REAL(r):"bool"===i?c[o]="true"===r:"date"===i?c[o]=new Date(r):"username"===i&&(c[o]=r.toLowerCase()))})}),EACH(c,function(e,t){void 0===i[t]&&delete c[t]}),o.checkHasError=a=function(){return d},o.getErrors=u=function(){return l}}});o.check=r=function(e){return c({data:e})},o.checkForUpdate=a=function(e){return c({data:e,isForUpdate:!0})},o.getValidDataSet=u=function(){return i}}}}),global.CHECK_IS_ARGUMENTS=METHOD({run:function(e){"use strict";return void 0!==e&&e!==TO_DELETE&&"object"==typeof e&&("[object Arguments]"===Object.prototype.toString.call(e)||void 0!==e.callee&&"function"==typeof e.callee)?!0:!1}}),global.CHECK_ARE_SAME=METHOD({run:function(e){"use strict";var t=!1,n=function(e,t){return e instanceof Date==!0&&t instanceof Date==!0?e.getTime()===t.getTime():CHECK_IS_DATA(e)===!0&&CHECK_IS_DATA(t)===!0?EACH(e,function(e,o){return n(e,t[o])}):CHECK_IS_ARRAY(e)===!0&&CHECK_IS_ARRAY(t)===!0?EACH(e,function(e,o){return n(e,t[o])}):e===t};return e.length>1&&(t=REPEAT(e.length,function(t){return t<e.length-1?n(e[t],e[t+1]):n(e[t],e[0])})),t}}),global.CHECK_IS_ARRAY=METHOD({run:function(e){"use strict";return void 0!==e&&e!==TO_DELETE&&"object"==typeof e&&"[object Array]"===Object.prototype.toString.call(e)?!0:!1}}),global.CHECK_IS_DATA=METHOD({run:function(e){"use strict";return void 0!==e&&e!==TO_DELETE&&CHECK_IS_ARGUMENTS(e)!==!0&&CHECK_IS_ARRAY(e)!==!0&&e instanceof Date!=!0&&"object"==typeof e?!0:!1}}),global.CHECK_IS_EMPTY_DATA=METHOD({run:function(e){"use strict";return CHECK_ARE_SAME([e,{}])}}),global.PACK_DATA=METHOD({run:function(e){"use strict";var t=COPY(e),n=[];return EACH(t,function(e,o){e instanceof Date==!0?(t[o]=INTEGER(e.getTime()),n.push(o)):CHECK_IS_DATA(e)===!0?t[o]=PACK_DATA(e):CHECK_IS_ARRAY(e)===!0&&EACH(e,function(t,n){CHECK_IS_DATA(t)===!0&&(e[n]=PACK_DATA(t))})}),t.__DATE_ATTR_NAMES=n,t}}),global.UNPACK_DATA=METHOD({run:function(e){"use strict";var t=COPY(e);return void 0!==t.__DATE_ATTR_NAMES&&(EACH(t.__DATE_ATTR_NAMES,function(e){t[e]=new Date(t[e])}),delete t.__DATE_ATTR_NAMES),EACH(t,function(e,n){CHECK_IS_DATA(e)===!0?t[n]=UNPACK_DATA(e):CHECK_IS_ARRAY(e)===!0&&EACH(e,function(t,n){CHECK_IS_DATA(t)===!0&&(e[n]=UNPACK_DATA(t))})}),t}}),global.CHECK_IS_IN=METHOD({run:function(e){"use strict";var t=e.data,n=e.array,o=e.value;return void 0!==t?EACH(t,function(e){return CHECK_ARE_SAME([e,o])===!0?!1:void 0})!==!0:void 0!==n?EACH(n,function(e){return CHECK_ARE_SAME([e,o])===!0?!1:void 0})!==!0:void 0}}),global.COMBINE=METHOD({run:function(e){"use strict";var t,n;return e.length>0&&(t=e[0],CHECK_IS_DATA(t)===!0?(n={},EACH(e,function(e){EXTEND({origin:n,extend:e})})):CHECK_IS_ARRAY(t)===!0&&(n=[],EACH(e,function(e){EXTEND({origin:n,extend:e})}))),n}}),global.COPY=METHOD({run:function(e){"use strict";var t;return CHECK_IS_DATA(e)===!0?(t={},EXTEND({origin:t,extend:e})):CHECK_IS_ARRAY(e)===!0&&(t=[],EXTEND({origin:t,extend:e})),t}}),global.EXTEND=METHOD({run:function(e){"use strict";var t=e.origin,n=e.extend;return CHECK_IS_DATA(t)===!0?EACH(n,function(e,n){t[n]=e instanceof Date==!0?new Date(e.getTime()):CHECK_IS_DATA(e)===!0||CHECK_IS_ARRAY(e)===!0?COPY(e):e}):CHECK_IS_ARRAY(t)===!0&&EACH(n,function(e){t.push(e instanceof Date==!0?new Date(e.getTime()):CHECK_IS_DATA(e)===!0||CHECK_IS_ARRAY(e)===!0?COPY(e):e)}),t}}),global.FIND=METHOD({run:function(e,t){"use strict";var n,o,i,r;return void 0!==t?CHECK_IS_DATA(e)===!0?EACH(e,function(e){return t(e)===!0?(r=e,!1):void 0}):CHECK_IS_ARRAY(e)===!0&&EACH(e,function(e){return t(e)===!0?(r=e,!1):void 0}):(n=e.data,o=e.array,i=e.value,void 0!==n&&EACH(n,function(e,t){return e===i?(r=t,!1):void 0}),void 0!==o&&EACH(o,function(e,t){return e===i?(r=t,!1):void 0})),r}}),global.REMOVE=METHOD({run:function(e,t){"use strict";var n,o,i,r,a;void 0!==t?CHECK_IS_DATA(e)===!0?EACH(e,function(n,o){t(n)===!0&&REMOVE({data:e,name:o})}):CHECK_IS_ARRAY(e)===!0&&EACH(e,function(n,o){t(n)===!0&&REMOVE({array:e,key:o})}):(n=e.data,o=e.array,i=e.name,r=e.key,a=e.value,void 0!==i&&delete n[i],void 0!==r&&o.splice(r,1),void 0!==a&&(void 0!==n&&EACH(n,function(e,t){CHECK_ARE_SAME([e,a])===!0&&REMOVE({data:n,name:t})}),void 0!==o&&EACH(o,function(e,t){CHECK_ARE_SAME([e,a])===!0&&REMOVE({array:o,key:t})})))}}),global.CALENDAR=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,u,c,s;void 0===n&&(n=new Date),t.getYear=o=function(){return n.getFullYear()},t.getMonth=i=function(e){var t=n.getMonth()+1;return e===!0?10>t?"0"+t:""+t:t},t.getDate=r=function(e){var t=n.getDate();return e===!0?10>t?"0"+t:""+t:t},t.getDay=a=function(){return n.getDay()},t.getHour=u=function(e){var t=n.getHours();return e===!0?10>t?"0"+t:""+t:t},t.getMinute=c=function(e){var t=n.getMinutes();return e===!0?10>t?"0"+t:""+t:t},t.getSecond=s=function(e){var t=n.getSeconds();return e===!0?10>t?"0"+t:""+t:t}}}),global.CREATE_DATE=METHOD({run:function(e){"use strict";var t=e.year,n=e.month,o=e.date,i=e.hour,r=e.minute,a=e.second,u=CALENDAR(new Date);return void 0===t&&(t=u.getYear()),void 0===n&&(n=void 0===o?0:u.getMonth()),void 0===o&&(o=void 0===i?0:u.getDate()),void 0===i&&(i=void 0===r?0:u.getHour()),void 0===r&&(r=void 0===a?0:u.getMinute()),void 0===a&&(a=0),new Date(t,n-1,o,i,r,a)}}),global.DELAY=CLASS({init:function(e,t,n,o){"use strict";var i,r;void 0===o&&(o=n,n=0),i=setTimeout(function(){o(t)},1e3*n),t.remove=r=function(){clearTimeout(i)}}}),global.INTERVAL=CLASS({init:function(e,t,n,o){"use strict";var i,r;void 0===o&&(o=n,n=0),i=setInterval(function(){o(t)===!1&&r()},0===n?1:1e3*n),t.remove=r=function(){clearInterval(i)}}}),global.LOOP=CLASS(function(){"use strict";var e,t,n=[],o=[],i=function(){void 0===t&&(e=Date.now(),t=INTERVAL(function(){var t,i,r,a,u,c=Date.now(),s=c-e;if(s>0){for(a=0;a<n.length;a+=1)if(t=n[a],void 0!==t.fps&&t.fps>0){for(void 0===t.timeSigma&&(t.timeSigma=0,t.countSigma=0),i=parseInt(t.fps/(1e3/s)*(t.timeSigma/s+1),10)-t.countSigma,void 0!==t.start&&t.start(),r=t.interval,u=0;i>u;u+=1)r();void 0!==t.end&&t.end(s),t.countSigma+=i,t.timeSigma+=s,t.timeSigma>1e3&&(t.timeSigma=void 0)}for(a=0;a<o.length;a+=1)o[a](s);e=c}}))},r=function(){n.length<=0&&o.length<=0&&(t.remove(),t=void 0)};return{init:function(e,t,a,u){var c,s,d,l,f,E,v;void 0!==u?(CHECK_IS_DATA(u)!==!0?d=u:(s=u.start,d=u.interval,l=u.end),n.push(f={fps:a,start:s,interval:d,end:l}),t.changeFPS=E=function(e){f.fps=e},t.remove=v=function(){REMOVE({array:n,value:f}),r()}):(o.push(c=a),t.remove=v=function(){REMOVE({array:o,value:c}),r()}),i()}}}),global.RAR=METHOD({run:function(e,t){"use strict";return void 0===t&&(t=e,e=void 0),t(e),t}}),global.RUN=METHOD({run:function(e){"use strict";var t=function(){return e(t)};return t()}}),global.INTEGER=METHOD({run:function(e){"use strict";return void 0===e?void 0:parseInt(e,10)}}),global.RANDOM=METHOD({run:function(e){"use strict";var t,n,o;return CHECK_IS_DATA(e)!==!0?o=e:(t=e.min,n=e.max,o=e.limit),void 0===t&&(t=0),void 0!==o&&(n=o-1),Math.floor(Math.random()*(n-t+1)+t)}}),global.REAL=METHOD({run:function(e){"use strict";return void 0===e?void 0:parseFloat(e)}}),global.EACH=METHOD({run:function(e,t){"use strict";var n,o,i;if(void 0===e)return!1;if(CHECK_IS_DATA(e)===!0){for(o in e)if(e.hasOwnProperty(o)===!0&&t(e[o],o)===!1)return!1}else{if(void 0===t)return t=e,e=void 0,function(e){return EACH(e,t)};for(n=e.length,i=0;n>i;i+=1){if(t(e[i],i)===!1)return!1;e.length<n?(i-=n-e.length,n-=n-e.length):e.length>n&&(n+=e.length-n)}}return!0}}),global.REPEAT=METHOD({run:function(e,t){"use strict";var n,o,i,r,a,u;if(void 0===t&&(t=e,e=void 0),void 0!==e&&(CHECK_IS_DATA(e)!==!0?n=e:(o=e.start,i=e.end,r=e.limit,a=e.step)),void 0===r&&void 0!==i&&(r=i+1),void 0===a&&(a=1),void 0!==n){for(u=0;u<parseInt(n,10);u+=1)if(t(u)===!1)return!1}else if(void 0!==i&&o>i){for(u=o;u>=i;u-=a)if(t(u)===!1)return!1}else{if(void 0===r)return function(e){return REPEAT(e,t)};for(u=o;r>u;u+=a)if(t(u)===!1)return!1}return!0}}),global.REVERSE_EACH=METHOD({run:function(e,t){"use strict";var n,o;if(void 0===e)return!1;if(void 0===t)return t=e,e=void 0,function(e){return REVERSE_EACH(e,t)};for(n=e.length,o=n-1;o>=0;o-=1){if(t(e[o],o)===!1)return!1;e.length<n&&(o+=n-e.length)}return!0}}),global.BROWSER_CONFIG={host:location.hostname,port:""===location.port?"https:"===location.protocol?443:80:INTEGER(location.port),isSecure:"https:"===location.protocol,isSupportingX2:!1,isUsingFlashCanvasPro:!1},global.INFO=OBJECT({init:function(e,t){"use strict";var n,o,i,r,a,u=void 0!==global.ontouchstart;t.getLang=function(){var e=STORE("__INFO").get("lang");return void 0===e&&(e=navigator.language,e.length>2&&(e=e.substring(0,2)),e=e.toLowerCase()),e},t.changeLang=n=function(e){STORE("__INFO").save({name:"lang",value:e}),location.reload()},t.checkIsHDDisplay=o=function(){return void 0!==global.devicePixelRatio&&devicePixelRatio>1?!0:!1},t.checkIsTouchMode=i=function(){return u},t.checkIsExistsTapDelay=r=function(){return!1},t.getBrowserInfo=a=function(){return{name:bowser.name,version:REAL(bowser.version)}},EVENT_LOW("mousemove",function(){u=!1}),EVENT_LOW("touchstart",function(){u=!0})}}),global.LOAD=METHOD({run:function(e,t){"use strict";var n,o,i,r,a,u,c,s,d,l,f,E;CHECK_IS_DATA(e)!==!0?n=e:(n=e.url,void 0===n&&(i=void 0===e.host?BROWSER_CONFIG.host:e.host,r=void 0===e.port?BROWSER_CONFIG.port:e.port,a=e.isSecure,u=e.uri,c=e.paramStr,n=(a===!0?"https://":"http://")+i+":"+r+"/"+u+"?"+c),o=e.isNoCache),void 0!==t&&(s=t.error),READY.readyLoad(),l=document.getElementsByTagName("script"),d=l[l.length-1],f=document.createElement("script"),f.src=(-1===n.indexOf("?")?n+"?":n+"&")+(o!==!0&&void 0!==CONFIG.version?"version="+CONFIG.version:(new Date).getTime()),f.onload=function(){E!==!0&&(E=!0,READY.loaded())},f.onreadystatechange=function(){var e=this.readyState;E===!0||"loaded"!==e&&"complete"!==e||(E=!0,DELAY(function(){READY.loaded()}))};try{f.onerror=s}catch(v){}return DOM({el:f}).insertAfter(DOM({el:d}))}}),global.READY=METHOD(function(e){"use strict";var t,n,o,i=0,r=[];return e.readyLoad=n=function(){i+=1},e.loaded=o=function(){i-=1,t===!0&&0===i&&(EACH(r,function(e){e()}),r=[])},global.onload=function(){t=!0,0===i&&(EACH(r,function(e){e()}),r=[])},{run:function(e){i>0||t!==!0?r.push(e):e()}}}),global.SOUND=CLASS(function(){"use strict";var e;return{init:function(t,n,o){var i,r,a,u,c,s,d=o.mp3,l=o.ogg,f=o.isLoop,E=new Audio;""===E.canPlayType("audio/mpeg;")&&E.canPlayType("audio/ogg;")&&(d=l),void 0===e&&void 0!==global.AudioContext&&(e=new AudioContext),void 0!==e?(i=new XMLHttpRequest,i.open("GET",d,!0),i.responseType="arraybuffer",i.onload=function(){e.decodeAudioData(i.response,function(t){var n=e.createGain?e.createGain():e.createGainNode();r=t,n.connect(e.destination),n.gain.value=.5,void 0!==u&&u()})},i.send(),n.play=c=function(){return u=function(){a=e.createBufferSource(),a.buffer=r,a.connect(e.destination),a.loop=f,void 0!==a.noteOn?a.noteOn(0):a.start(0),u=void 0},void 0!==r&&u(),n},n.stop=s=function(){void 0!==a&&(void 0!==a.noteOff?a.noteOff(0):a.stop(0))}):(E.src=d,f===!0&&E.addEventListener("ended",function(){this.currentTime=0,this.play()},!1),n.play=c=function(){return E.play(),n},n.stop=s=function(){E.pause()})}}}),global.STORE=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,u;e.genFullName=o=function(e){return n+"."+e},t.save=i=function(e){var t=e.name,n=o(t),i=e.value,r=e.isToSession;sessionStorage.setItem(n,STRINGIFY(i)),r!==!0&&localStorage.setItem(n,STRINGIFY(i))},t.get=r=function(e){var t=o(e),n=PARSE_STR(sessionStorage.getItem(t));return(void 0===n||n===TO_DELETE)&&(n=PARSE_STR(localStorage.getItem(t)),n===TO_DELETE&&(n=void 0)),n},t.list=a=function(){var e,t,o,i={};for(o=0;o<sessionStorage.length;o+=1)e=sessionStorage.key(o),e.substring(0,n.length+1)===n+"."&&(t=e.substring(n.length+1),i[t]=r(t));for(o=0;o<localStorage.length;o+=1)e=localStorage.key(o),e.substring(0,n.length+1)===n+"."&&(t=e.substring(n.length+1),i[t]=r(t));return i},t.remove=u=function(e){var t=o(e);sessionStorage.removeItem(t),localStorage.removeItem(t)}}}),FOR_BOX(function(e){"use strict";e.STORE=CLASS({init:function(t,n,o){var i,r,a,u=STORE(e.boxName+"."+o);n.save=i=u.save,n.get=r=u.get,n.remove=a=u.remove}})}),global.CLEAR_BOTH=METHOD({run:function(){"use strict";return DIV({style:{clear:"both"}})}}),global.DOM=CLASS({preset:function(){"use strict";return NODE},init:function(e,t,n){"use strict";var o,i,r,a=n.tag,u=n.__TEXT,c=n.el;void 0!==a?c="body"===a?document.body:"__STRING"===a?document.createTextNode(u):document.createElement(a):c!==document.body&&c.parentNode!==TO_DELETE&&t.setParent(DOM({el:c.parentNode})),t.getEl=o=function(){return c},e.setEl=i=function(n){c=n,e.setDom(t)},i(c),e.setAttr=r=function(e){var t=e.name,n=e.value;c.setAttribute(t,n)}}}),global.NODE=CLASS({init:function(e,t){"use strict";var n,o,i,r,a,u,c,s,d,l,f,E,v,g,m,h,A,T,S,p,C,O,I,_,R,D,N,b,y,H,M,L,F,P,w,x,B,k,V,G,X,K,U,W,Y,z,$=[];e.setWrapperDom=l=function(e){n=e,i=e.getEl(),s=P("display"),M("show",function(){EACH($,function(e){e.checkIsShowing()===!0&&(EVENT.fireAll({node:e,name:"show"}),EVENT.removeAll({node:e,name:"show"}))})})},e.setContentDom=f=function(e){o=e,r=e.getEl()},e.setDom=E=function(e){l(e),f(e)},t.getWrapperDom=v=function(){return n},t.getContentDom=g=function(){return o},t.getWrapperEl=m=function(){return i},t.getContentEl=h=function(){return r},A=function(e,n){b(e),void 0===n?c.getChildren().push(t):c.getChildren().splice(n,0,t),EVENT.fireAll({node:t,name:"attach"}),U()===!0&&(EVENT.fireAll({node:t,name:"show"}),EVENT.removeAll({node:t,name:"show"})),void 0!==a&&EACH(a,function(e){O(e)}),void 0!==u&&EACH(u,function(e){_(e)})},t.append=T=function(e){var n;CHECK_IS_DATA(e)===!0?e.appendTo(t):t.type===TEXTAREA?T(DOM({tag:"__STRING",__TEXT:String(void 0===e?"":e)})):(n=String(void 0===e?"":e).split("\n"),EACH(n,function(e,t){T(DOM({tag:"__STRING",__TEXT:e})),t<n.length-1&&T(BR())}))},t.appendTo=S=function(e){var n=e.getContentEl();return void 0!==n&&(n.appendChild(i),A(e)),t},t.prepend=p=function(e){var n;CHECK_IS_DATA(e)===!0?e.prependTo(t):t.type===TEXTAREA?p(DOM({tag:"__STRING",__TEXT:String(void 0===e?"":e)})):(n=String(void 0===e?"":e).split("\n"),REPEAT({start:n.length-1,end:0},function(e){p(DOM({tag:"__STRING",__TEXT:n[e]})),e<n.length-1&&p(BR())}))},t.prependTo=C=function(e){var n=e.getContentEl();return void 0!==n&&(void 0===n.childNodes[0]?n.appendChild(i):n.insertBefore(i,n.childNodes[0]),A(e,0)),t},t.after=O=function(e){var n;void 0!==i&&(i.parentNode===TO_DELETE?(void 0===a&&(a=[]),a.push(e)):CHECK_IS_DATA(e)===!0?e.insertAfter(t):(n=String(void 0===e?"":e).split("\n"),REPEAT({start:n.length-1,end:0},function(e){O(DOM({tag:"__STRING",__TEXT:n[e]})),e<n.length-1&&O(BR())})))},t.insertAfter=I=function(e){var n=e.getWrapperEl();return void 0!==n&&(n.parentNode.insertBefore(i,n.nextSibling),A(e.getParent(),FIND({array:e.getParent().getChildren(),value:e})+1)),t},t.before=_=function(e){var n;void 0!==i&&(i.parentNode===TO_DELETE?(void 0===u&&(u=[]),u.push(e)):CHECK_IS_DATA(e)===!0?e.insertBefore(t):(n=String(void 0===e?"":e).split("\n"),EACH(n,function(e,t){_(DOM({tag:"__STRING",__TEXT:e})),t<n.length-1&&_(BR())})))},t.insertBefore=R=function(e){var n=e.getWrapperEl();return void 0!==n&&(n.parentNode.insertBefore(i,n),A(e.getParent(),FIND({array:e.getParent().getChildren(),value:e}))),t},t.remove=D=function(){void 0!==i&&i.parentNode!==TO_DELETE&&(N(),i.parentNode.removeChild(i),b(void 0),EVENT.fireAll({node:t,name:"remove"}),EVENT.removeAll({node:t}),i=void 0,r=void 0),d=void 0},t.empty=N=function(){EACH($,function(e){e.remove()})},t.setParent=b=function(e){void 0!==c&&REMOVE({array:c.getChildren(),value:t}),c=e},t.getParent=y=function(){return c},t.getChildren=H=function(){return $},t.on=M=function(e,n){EVENT({node:t,name:e},n)},t.off=L=function(e,n){void 0!==n?EVENT.remove({node:t,name:e},n):EVENT.removeAll({node:t,name:e})},t.addStyle=F=function(e){ADD_STYLE({node:t,style:e})},t.getStyle=P=function(e){var t,n;return void 0!==i&&(t=i.style,void 0!==t)?(n=t[e],""===n?void 0:"px"===n.substring(n.length-2)?REAL(n):n):void 0},t.getWidth=w=function(){return i.offsetWidth},t.getInnerWidth=x=function(){return i.clientWidth},t.getHeight=B=function(){return i.offsetHeight},t.getInnerHeight=k=function(){return i.clientHeight},t.getLeft=V=function(){var e=0,t=i;do e+=t.offsetLeft-(t===document.body?0:t.scrollLeft),t=t.offsetParent;while(t!==TO_DELETE);return e},t.getTop=G=function(){var e=0,t=i;do e+=t.offsetTop-(t===document.body?0:t.scrollTop),t=t.offsetParent;while(t!==TO_DELETE);return e},t.hide=X=function(){F({display:"none"})},t.show=K=function(){F({display:void 0===s?"":s}),U()===!0&&(EVENT.fireAll({node:t,name:"show"}),EVENT.removeAll({node:t,name:"show"}))},t.checkIsShowing=U=function(){return i===document.body?!0:void 0!==c&&c.checkIsShowing()===!0&&"none"!==P("display")},t.setData=W=function(e){d=e},t.getData=Y=function(){return d},t.scrollTo=z=function(e){var t=e.left,n=e.top;void 0!==r&&(void 0!==t&&(r.scrollLeft=t),void 0!==n&&(r.scrollTop=n))}},afterInit:function(e,t,n){"use strict";var o,i,r;void 0!==n&&(o=n.style,i=void 0===n.c||CHECK_IS_ARRAY(n.c)===!0?n.c:[n.c],r=n.on),void 0!==o&&t.addStyle(o),void 0!==r&&EACH(r,function(e,n){t.on(n,e)}),void 0!==i&&EACH(i,function(e){t.append(e)})}}),global.ANIMATE=METHOD({run:function(e,t){"use strict";var n=e.node,o=e.keyframes,i=void 0===e.duration?.5:e.duration,r=void 0===e.timingFunction?"":e.timingFunction,a=void 0===e.delay?"":e.delay,u=void 0===e.iterationCount?"":e.iterationCount,c=void 0===e.direction?"":e.direction,s=void 0===e.playState?"":e.playState,d=o.getName()+" "+i+"s "+r+" "+a+" "+u+" "+c+" "+s;n.addStyle(o.getStartStyle()),n.addStyle({animation:d}),n.addStyle(o.getFinalStyle()),void 0===t||""!==u&&1!==u||DELAY(i,function(){t(n)})}}),global.KEYFRAMES=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,u,c,s="__KEYFRAMES_"+t.id,d="",l="";EACH(n,function(e,t){d+=t+"{",EACH(e,function(e,t){"number"==typeof e&&"zIndex"!==t&&"opacity"!==t&&(e+="px"),d+=t.replace(/([A-Z])/g,"-$1").toLowerCase()+":"+e+";","transform"===t&&(d+="-webkit-transform:"+e+";",d+="-moz-transform:"+e+";",d+="-o-transform:"+e+";",d+="-ms-transform:"+e+";")}),d+="}","from"===t||"0%"===t?i=e:("to"===t||"100%"===t)&&(r=e)}),l+="@-webkit-keyframes "+s+"{"+d+"}",l+="@-moz-keyframes "+s+"{"+d+"}",l+="@-o-keyframes "+s+"{"+d+"}",l+="@-ms-keyframes "+s+"{"+d+"}",l+="@keyframes "+s+"{"+d+"}",o=document.createElement("style"),o.type="text/css",o.appendChild(document.createTextNode(l)),document.getElementsByTagName("head")[0].appendChild(o),t.getName=a=function(){return s},t.getStartStyle=u=function(){return i},t.getFinalStyle=c=function(){return r}}}),global.E=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,u,c,s,d,l=n.e,f=n.el;o=function(e,t){for(var n=t.parentNode;n!==TO_DELETE;){if(n===e)return!0;n=n.parentNode}return!1},t.stopDefault=i=function(){l.preventDefault()},t.stopBubbling=r=function(){l.stopPropagation()},t.stop=a=function(){i(),r()},t.getLeft=u=function(){var e;if(INFO.checkIsTouchMode()===!0){if(void 0!==l.touches&&void 0!==l.touches[0]&&(EACH(l.touches,function(t){return void 0!==t.target&&o(f,t.target)===!0?(e=t.pageX,!1):void 0}),void 0===e&&(e=l.touches[0].pageX),void 0!==e))return e;if(void 0!==l.changedTouches&&void 0!==l.changedTouches[0]&&(EACH(l.changedTouches,function(t){return void 0!==t.target&&o(f,t.target)===!0?(e=t.pageX,!1):void 0}),void 0===e&&(e=l.changedTouches[0].pageX),void 0!==e))return e}return l.pageX},t.getTop=c=function(){var e;if(INFO.checkIsTouchMode()===!0){if(void 0!==l.touches&&void 0!==l.touches[0]&&(EACH(l.touches,function(t){return void 0!==t.target&&o(f,t.target)===!0?(e=t.pageY,!1):void 0}),void 0===e&&(e=l.touches[0].pageY),void 0!==e))return e;if(void 0!==l.changedTouches&&void 0!==l.changedTouches[0]&&(EACH(l.changedTouches,function(t){return void 0!==t.target&&o(f,t.target)===!0?(e=t.pageY,!1):void 0}),void 0===e&&(e=l.changedTouches[0].pageY),void 0!==e))return e}return l.pageY},t.getKeyCode=s=function(){return l.keyCode},t.getState=d=function(){return l.state}}}),global.EMPTY_E=CLASS({init:function(e,t){"use strict";var n,o,i,r,a,u,c;t.stopDefault=n=function(){},t.stopBubbling=o=function(){},t.stop=i=function(){},t.getLeft=r=function(){return-999999},t.getTop=a=function(){return-999999},t.getKeyCode=u=function(){return-999999},t.getState=c=function(){}}}),global.EVENT=CLASS(function(e){"use strict";var t,n,o,i={};return e.fireAll=t=function(e){var t,n,o,r,a,u;return CHECK_IS_DATA(e)!==!0?n=e:(t=e.node,n=e.name),o=void 0===t?"body":t.id,r=i[o],void 0!==r&&(a=r[n],void 0!==a&&EACH(a,function(e){e.fire()===!1&&(u=!1)})),u},e.removeAll=n=function(e){var t,n,o,r,a;CHECK_IS_DATA(e)!==!0?n=e:(t=e.node,n=e.name),o=void 0===t?"body":t.id,r=i[o],void 0!==r&&(void 0!==n?(a=r[n],void 0!==a&&EACH(a,function(e){e.remove()})):EACH(r,function(e){EACH(e,function(e){e.remove()})}))},e.remove=o=function(e,t){var n,o,r,a=e.node,u=e.name;n=void 0===a?"body":a.id,o=i[n],void 0!==o&&(r=o[u],void 0!==r&&EACH(r,function(e){e.getEventHandler()===t&&e.remove()}))},{init:function(e,t,n,o){var r,a,u,c,s,d,l,f,E,v,g,m,h=[];CHECK_IS_DATA(n)!==!0?u=n:(r=n.node,a=n.lowNode,u=n.name,void 0===a&&(a=r)),c=void 0===r?"body":r.id,void 0===i[c]&&(i[c]={}),void 0===i[c][u]&&(i[c][u]=[]),i[c][u].push(t),E=function(){REMOVE({array:i[c][u],value:t}),i[c][u].length<=0&&delete i[c][u],CHECK_IS_EMPTY_DATA(i[c])===!0&&delete i[c]},"tap"===u?(h.push(EVENT_LOW({node:r,lowNode:a,name:"touchstart"},function(e){INFO.checkIsTouchMode()===!0&&INFO.checkIsExistsTapDelay()===!0&&void 0!==e&&(d=e.getLeft(),l=e.getTop())})),h.push(EVENT_LOW({node:r,lowNode:a,name:"touchend"},function(e,t){var n,i;return INFO.checkIsTouchMode()===!0&&INFO.checkIsExistsTapDelay()===!0&&void 0!==e&&(n=e.getLeft(),i=e.getTop(),n>=d-5&&d+5>=n&&i>=l-5&&l+5>=i&&(void 0===f||Date.now()-f>100))?(f=Date.now(),"body"!==c&&e.stopDefault(),o(e,t)):void 0})),h.push(EVENT_LOW({node:r,lowNode:a,name:"click"},function(e,t){return INFO.checkIsTouchMode()===!0&&INFO.checkIsExistsTapDelay()===!0||!(void 0===f||Date.now()-f>100)?void 0:(f=Date.now(),"body"!==c&&e.stopDefault(),o(e,t))}))):"doubletap"===u?s=EVENT({node:r,name:"tap"},function(e){void 0===f?f=Date.now():(Date.now()-f<600&&o(e,r),f=void 0,getSelection().removeAllRanges())}):"touchstart"===u?(h.push(EVENT_LOW({node:r,lowNode:a,name:"touchstart"},function(e,t){INFO.checkIsTouchMode()===!0&&o(e,t)})),h.push(EVENT_LOW({node:r,lowNode:a,name:"mousedown"},function(e,t){INFO.checkIsTouchMode()!==!0&&o(e,t)}))):"touchmove"===u?(h.push(EVENT_LOW({node:r,lowNode:a,name:"touchmove"},function(e,t){INFO.checkIsTouchMode()===!0&&o(e,t)
})),h.push(EVENT_LOW({node:r,lowNode:a,name:"mousemove"},function(e,t){INFO.checkIsTouchMode()!==!0&&o(e,t)}))):"touchend"===u?(h.push(EVENT_LOW({node:r,lowNode:a,name:"touchend"},function(e,t){INFO.checkIsTouchMode()===!0&&o(e,t)})),h.push(EVENT_LOW({node:r,lowNode:a,name:"mouseup"},function(e,t){INFO.checkIsTouchMode()!==!0&&o(e,t)}))):"mouseover"===u?(h.push(EVENT_LOW({node:r,lowNode:a,name:"touchstart"},function(e,t){INFO.checkIsTouchMode()===!0&&o(e,t)})),h.push(EVENT_LOW({node:r,lowNode:a,name:"mouseover"},function(e,t){INFO.checkIsTouchMode()!==!0&&o(e,t)}))):"attach"!==u&&"show"!==u&&"remove"!==u&&h.push(EVENT_LOW(n,o)),t.remove=v=function(){EACH(h,function(e){e.remove()}),void 0!==s&&s.remove(),E()},t.fire=g=function(){return o(EMPTY_E(),r)},t.getEventHandler=m=function(){return o}}}}),global.EVENT_LOW=CLASS({init:function(e,t,n,o){"use strict";var i,r,a,u,c,s;CHECK_IS_DATA(n)!==!0?a=n:(i=n.node,r=n.lowNode,a=n.name,void 0===r&&(r=i)),u=void 0!==r?r.getWrapperEl():void 0===global["on"+a]?document:global,e.innerHandler=c=function(e){var t=o(E({e:e,el:u}),i);return"beforeunload"===a&&void 0!==t&&(e.returnValue=t),t},u.addEventListener(a,c,!1),t.remove=s=function(){u.removeEventListener(a,c,!1)}}}),global.EVENT_ONCE=CLASS({init:function(e,t,n,o){"use strict";var i,r,a=EVENT(n,function(e,t){o(e,t),a.remove()});t.remove=i=function(){a.remove()},t.fire=r=function(){a.fire()}}}),global.ADD_STYLE=METHOD(function(){"use strict";var e,t=["Webkit","Moz","O","Ms"],n=["transform","transformOrigin","animation","touchCallout","userSelect","backgroundSize","backgroundPosition"];return NEXT([function(e){document.body===TO_DELETE?EVENT({name:"load"},e):e()},function(){return function(){var t=document.createElement("div");t.style.position="fixed",t.style.top="10px",document.body.appendChild(t),e=10===t.offsetTop,document.body.removeChild(t)}}]),{run:function(o){var i=o.node,r=o.style,a=i.getWrapperEl(),u=function(e){X2.checkIsCached(e)===!0?X2.switchBG({node:i,uri:e}):EXPORT_IMG_TYPE(IMG({src:e}),function(t){("png"===t||"gif"===t||"bmp"===t)&&X2.switchBG({node:i,uri:e})})};EACH(r,function(o,r){var c,s,d;if(void 0!==o)if("onDisplayResize"===r)c=EVENT({name:"resize"},RAR(function(){ADD_STYLE({node:i,style:o(WIN_WIDTH(),WIN_HEIGHT())})})),i.on("remove",function(){c.remove()});else try{"position"===r&&"fixed"===o&&e!==!0?(a.style.position="absolute",i.__FIXED=!0,void 0===i.__FIXED_LEFT&&""!==a.style.left&&(i.__FIXED_LEFT=INTEGER(a.style.left)),void 0===i.__FIXED_RIGHT&&""!==a.style.right&&(i.__FIXED_RIGHT=INTEGER(a.style.right)),void 0===i.__FIXED_TOP&&""!==a.style.top&&(i.__FIXED_TOP=INTEGER(a.style.top)),void 0===i.__FIXED_BOTTOM&&""!==a.style.bottom&&(i.__FIXED_BOTTOM=INTEGER(a.style.bottom)),s=EVENT({name:"scroll"},RAR(d=function(){void 0!==i.__FIXED_LEFT&&(a.style.left=i.__FIXED_LEFT+SCROLL_LEFT()+"px"),void 0!==i.__FIXED_RIGHT&&(a.style.left=SCROLL_LEFT()+WIN_WIDTH()-i.getWidth()-i.__FIXED_RIGHT+"px"),void 0!==i.__FIXED_TOP&&(a.style.top=i.__FIXED_TOP+SCROLL_TOP()+"px"),void 0!==i.__FIXED_BOTTOM&&(a.style.top=SCROLL_TOP()+WIN_HEIGHT()-i.getHeight()-i.__FIXED_BOTTOM+"px")})),i.on("attach",function(){d()}),DELAY(function(){d()}),i.on("remove",function(){s.remove()})):i.__FIXED===!0&&"left"===r?(i.__FIXED_LEFT=INTEGER(o),a.style.left=o+SCROLL_LEFT()+"px"):i.__FIXED===!0&&"right"===r?(i.__FIXED_RIGHT=INTEGER(o),a.style.left=SCROLL_LEFT()+WIN_WIDTH()-i.getWidth()-i.__FIXED_RIGHT+"px"):i.__FIXED===!0&&"top"===r?(i.__FIXED_TOP=INTEGER(o),a.style.top=o+SCROLL_TOP()+"px"):i.__FIXED===!0&&"bottom"===r?(i.__FIXED_BOTTOM=INTEGER(o),a.style.top=SCROLL_TOP()+WIN_HEIGHT()-i.getHeight()-i.__FIXED_BOTTOM+"px"):"flt"===r?a.style.cssFloat=o:"number"==typeof o&&"zIndex"!==r&&"opacity"!==r?(a.style[r]=o+"px",BROWSER_CONFIG.isSupportingX2===!0&&void 0!==INFO.checkIsHDDisplay&&INFO.checkIsHDDisplay()===!0&&("width"===r||"height"===r)&&(a.removeAttribute("width"),a.removeAttribute("height"))):"backgroundX2Image"===r?a.style.backgroundImage="url("+o+")":"backgroundImage"===r&&"none"!==o?(a.style[r]="url("+o+")",BROWSER_CONFIG.isSupportingX2===!0&&void 0!==INFO.checkIsHDDisplay&&INFO.checkIsHDDisplay()===!0&&u(o)):(a.style[r]=o,BROWSER_CONFIG.isSupportingX2===!0&&void 0!==INFO.checkIsHDDisplay&&INFO.checkIsHDDisplay()===!0&&(("width"===r||"height"===r)&&(a.removeAttribute("width"),a.removeAttribute("height")),"background"===r&&o.length>=7&&"url("===o.substring(0,4)&&u("'"===o.charAt(4)||'"'===o.charAt(4)?o.substring(5,o.length-2):o.substring(4,o.length-1))),CHECK_IS_IN({array:n,value:r})===!0&&EACH(t,function(e){a.style[e+r.charAt(0).toUpperCase()+r.slice(1)]=o}))}catch(l){}})}}}),global.RGBA=METHOD({run:function(e){"use strict";return"rgba("+e[0]+","+e[1]+","+e[2]+","+e[3]+")"}}),global.A=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"a"}},init:function(e,t,n){"use strict";var o,i,r,a,u;void 0!==n&&(o=n.href,i=n.target,r=n.style),t.setHref=a=function(t){e.setAttr({name:"href",value:t})},void 0!==o&&a(o),void 0!==i&&e.setAttr({name:"target",value:i}),(void 0===r||void 0===r.cursor)&&t.addStyle({cursor:"pointer"}),(void 0===r||void 0===r.textDecoration)&&t.addStyle({textDecoration:"underline"}),t.tap=u=function(){EVENT.fireAll({node:t,name:"tap"})}},afterInit:function(e,t,n){"use strict";var o,i,r,a,u=!1;void 0!==n&&(o=n.href,i=n.c),void 0===i&&void 0!==o&&(t.append(o),u=!0,OVERRIDE(t.append,function(e){t.append=r=function(n){u===!0&&(t.empty(),u=!1),e(n)}}),OVERRIDE(t.prepend,function(e){t.prepend=a=function(n){u===!0&&(t.empty(),u=!1),e(n)}}))}}),global.BODY=OBJECT({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"body"}}}),global.BR=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"br"}}}),global.CANVAS=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"canvas"}},init:function(e,t,n){"use strict";var o,i,r,a,u,c,s;void 0!==n&&(o=n.width,i=n.height),t.getContext=r=function(){return CONTEXT(t)},t.setSize=a=function(e){var n=t.getEl();void 0!==e.width&&(o=e.width),void 0!==e.height&&(i=e.height),void 0!==o&&(n.width=o),void 0!==i&&(n.height=i)},a({width:o,height:i}),t.getWidth=u=function(){return o},t.getHeight=c=function(){return i},t.getDataURL=s=function(){return t.getEl().toDataURL()}}}),global.DIV=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"div"}}}),global.FORM=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"form"}},init:function(e,t,n){"use strict";var o,i,r,a,u,c,s;void 0!==n&&(o=n.action,i=n.target,r=n.method,a=n.enctype),void 0!==o?e.setAttr({name:"action",value:o}):EVENT({node:t,name:"submit"},function(e){e.stop()}),void 0!==i&&e.setAttr({name:"target",value:i}),void 0!==r&&e.setAttr({name:"method",value:r}),void 0!==a&&e.setAttr({name:"enctype",value:a}),OVERRIDE(t.setData,function(e){t.getData=u=function(){var n=e(),o=function(e){EACH(e.getChildren(),function(e){void 0!==e.getValue&&void 0!==e.getName&&void 0!==e.getName()&&(n[e.getName()]=e.getValue()),o(e)})};return void 0===n&&(n={}),o(t),n}}),OVERRIDE(t.setData,function(e){t.setData=c=function(n){var o=function(e){EACH(e.getChildren(),function(e){var t;void 0!==e.setValue&&void 0!==e.getName&&void 0!==e.getName()&&(t=n[e.getName()],e.setValue(void 0===t?"":t)),o(e)})};o(t),e(n)}}),t.submit=s=function(e){EVENT.fireAll({node:t,name:"submit"}),e===!0&&t.getEl().submit()}}}),global.H1=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"h1"}}}),global.H2=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"h2"}}}),global.H3=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"h3"}}}),global.H4=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"h4"}}}),global.H5=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"h5"}}}),global.H6=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"h6"}}}),global.IFRAME=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"iframe",style:{border:"none"}}},init:function(e,t,n){"use strict";var o,i,r,a;void 0!==n&&(o=n.name,i=n.src),e.setAttr({name:"allowTransparency",value:!0}),e.setAttr({name:"frameBorder",value:0}),void 0!==o&&e.setAttr({name:"name",value:o}),t.setSrc=r=function(t){i=t,e.setAttr({name:"src",value:i})},void 0!==i&&r(i),t.getSrc=a=function(){return i}}}),global.IMG=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"img"}},init:function(e,t,n){"use strict";var o,i,r,a,u,c,s,d,l=n.src,f=t.getEl();t.getWidth=i=function(){return f.width},t.getHeight=r=function(){return f.height},t.setSize=a=function(e){var t=e.width,n=e.height;void 0!==t&&(f.width=t),void 0!==n&&(f.height=n)},t.getSrc=u=function(){return l},t.setX2Src=c=function(t){e.setAttr({name:"src",value:t})},t.setSrc=s=function(n){l=n,e.setAttr({name:"src",value:l}),o!==!0&&BROWSER_CONFIG.isSupportingX2===!0&&void 0!==INFO.checkIsHDDisplay&&INFO.checkIsHDDisplay()===!0&&(X2.checkIsCached(l)===!0?X2.switchImg(t):EXPORT_IMG_TYPE(t,function(e){("png"===e||"gif"===e||"bmp"===e)&&(o=!0,X2.switchImg(t))}))},void 0!==l&&s(l),t.checkIsX2=d=function(){return o}}}),global.INPUT=CLASS(function(e){"use strict";var t,n=[];return e.getFocusingInputIds=t=function(){return n},{preset:function(){return DOM},params:function(){return{tag:"input"}},init:function(e,n,o){var i,r,a,u,c,s,d,l,f,E,v,g,m,h;void 0!==o&&(i=o.name,r=o.type,a=o.placeholder,u=o.capture,c=o.accept,s=o.isMultiple),void 0!==r&&e.setAttr({name:"type",value:r}),"submit"!==r&&"reset"!==r&&(void 0!==i&&e.setAttr({name:"name",value:i}),void 0!==a&&e.setAttr({name:"placeholder",value:a}),void 0!==u&&e.setAttr({name:"capture",value:u}),void 0!==c&&e.setAttr({name:"accept",value:c}),s===!0&&e.setAttr({name:"multiple",value:s}),n.getName=d=function(){return i},n.getValue=l=function(){return"checkbox"===r||"radio"===r?n.getEl().checked:n.getEl().value},n.select=E=function(){"file"===r?n.getEl().click():n.getEl().select()},n.focus=v=function(){n.getEl().focus()},n.blur=g=function(){n.getEl().blur()},("checkbox"===r||"radio"===r)&&(n.toggleCheck=m=function(){return n.getEl().checked=n.getEl().checked===!0?!1:!0,EVENT.fireAll({node:n,name:"change"}),n.getEl().checked},n.checkIsChecked=h=function(){return n.getEl().checked},EVENT({node:n,name:"keyup"},function(e){void 0!==e&&32===e.getKeyCode()&&DELAY(function(){EVENT.fireAll({node:n,name:"change"})})}))),n.setValue=f=function(e){"checkbox"===r||"radio"===r?e===!0?n.getEl().checked!==!0?(n.getEl().checked=!0,EVENT.fireAll({node:n,name:"change"})):n.getEl().checked=!0:n.getEl().checked===!0?(n.getEl().checked=!1,EVENT.fireAll({node:n,name:"change"})):n.getEl().checked=!1:n.getEl().value!==e?(n.getEl().value=e,EVENT.fireAll({node:n,name:"change"})):n.getEl().value=e},EVENT({node:n,name:"focus"},function(){t().push(n.id)}),EVENT({node:n,name:"blur"},function(){REMOVE({array:t(),value:n.id})}),n.on("remove",function(){REMOVE({array:t(),value:n.id})}),"radio"===r&&EVENT({node:n,name:"touchstart"},function(){h()===!0&&EVENT_ONCE({node:n,name:"touchend"},function(){DELAY(function(){f(!1)})})})},afterInit:function(e,t,n){var o,i;void 0!==n&&(o=n.type,i=n.value),void 0!==i&&("checkbox"===o||"radio"===o?t.getEl().checked=i===!0?t.getEl().checked!==!0?!0:!0:t.getEl().checked===!0?!1:!1:t.getEl().value=t.getEl().value!==i?i:i)}}}),global.LI=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"li"}}}),global.OPTGROUP=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"optgroup"}},init:function(e,t,n){"use strict";var o=n.label;e.setAttr({name:"label",value:o})}}),global.OPTION=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"option"}},init:function(e,t){"use strict";var n,o;t.getValue=n=function(){return t.getEl().value},t.setValue=o=function(e){t.getEl().value=e}},afterInit:function(e,t,n){"use strict";var o,i;void 0!==n&&(o=n.value,i=n.c),void 0===o?t.setValue(""):(t.setValue(o),void 0===i&&t.append(o))}}),global.P=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"p"}}}),global.SELECT=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"select"}},init:function(e,t,n){"use strict";var o,i,r,a,u,c,s,d=!1;void 0!==n&&(o=n.name),void 0!==o&&e.setAttr({name:"name",value:o}),t.getName=i=function(){return o},t.getValue=r=function(){return t.getEl().value},t.setValue=a=function(e){t.getEl().value!==e?(t.getEl().value=e,EVENT.fireAll({node:t,name:"change"})):t.getEl().value=e},t.select=u=function(){t.getEl().select()},t.focus=c=function(){t.getEl().focus()},t.blur=s=function(){t.getEl().blur()},EVENT({node:t,name:"keydown"},function(e){var t=e.getKeyCode();91===t||17===t?d=!0:d!==!0&&e.stopBubbling()}),EVENT({node:t,name:"keyup"},function(e){var t=e.getKeyCode();(91===t||17===t)&&(d=!1)}),EVENT({node:t,name:"focus"},function(){INPUT.getFocusingInputIds().push(t.id)}),EVENT({node:t,name:"blur"},function(){REMOVE({array:INPUT.getFocusingInputIds(),value:t.id})}),t.on("remove",function(){REMOVE({array:INPUT.getFocusingInputIds(),value:t.id})})},afterInit:function(e,t,n){"use strict";var o;void 0!==n&&(o=n.value),void 0!==o&&t.setValue(o)}}),global.SPAN=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"span"}}}),global.TABLE=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"table"}},init:function(e,t,n){"use strict";var o;void 0!==n&&(o=n.style),(void 0===o||void 0===o.width)&&t.addStyle({width:"100%"})}}),global.TD=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"td"}},init:function(e,t,n){"use strict";var o,i;void 0!==n&&(o=n.rowspan,i=n.colspan),void 0!==o&&e.setAttr({name:"rowspan",value:o}),void 0!==i&&e.setAttr({name:"colspan",value:i})}}),global.TEXTAREA=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"textarea"}},init:function(e,t,n){"use strict";var o,i,r,a,u,c,s,d,l=!1;void 0!==n&&(o=n.name,i=n.placeholder),void 0!==o&&e.setAttr({name:"name",value:o}),void 0!==i&&e.setAttr({name:"placeholder",value:i}),t.getName=r=function(){return o},t.getValue=a=function(){return t.getEl().value},t.setValue=u=function(e){t.getEl().value!==e?(t.getEl().value=e,EVENT.fireAll({node:t,name:"change"})):t.getEl().value=e},t.select=c=function(){t.getEl().select()},t.focus=s=function(){t.getEl().focus()},t.blur=d=function(){t.getEl().blur()},EVENT({node:t,name:"keydown"},function(e){var t=e.getKeyCode();91===t||17===t?l=!0:l!==!0&&e.stopBubbling()}),EVENT({node:t,name:"keyup"},function(e){var t=e.getKeyCode();(91===t||17===t)&&(l=!1)}),EVENT({node:t,name:"focus"},function(){INPUT.getFocusingInputIds().push(t.id)}),EVENT({node:t,name:"blur"},function(){REMOVE({array:INPUT.getFocusingInputIds(),value:t.id})}),t.on("remove",function(){REMOVE({array:INPUT.getFocusingInputIds(),value:t.id})})},afterInit:function(e,t,n){"use strict";var o;void 0!==n&&(o=n.value),void 0!==o&&t.setValue(o)}}),global.TH=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"th"}},init:function(e,t,n){"use strict";var o,i;void 0!==n&&(o=n.rowspan,i=n.colspan),void 0!==o&&e.setAttr({name:"rowspan",value:o}),void 0!==i&&e.setAttr({name:"colspan",value:i})}}),global.TR=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"tr"}}}),global.UL=CLASS({preset:function(){"use strict";return DOM},params:function(){"use strict";return{tag:"ul"}}}),global.CHECK_IS_BLANK_PIXEL=METHOD(function(){"use strict";var e={};return{run:function(t,n){var o=t.img,i=t.left,r=t.right,a=t.centerLeft,u=t.top,c=t.bottom,s=t.centerTop;EXPORT_IMG_DATA(o,function(t){var d,l,f,E,v,g,m=o.getSrc(),h=e[m];if(void 0===h){for(d=t.width,l=t.height,f=t.data,h=[],v=0;l>v;v+=1)for(h[v]=[],g=0;d>g;g+=1)h[v][g]=f[v*d*4+4*g+3]<127.5;e[m]=h}void 0!==u?E=h[INTEGER(u)]:void 0!==c?E=h[h.length-INTEGER(c)-1]:void 0!==s&&(E=h[INTEGER(h.length/2)+INTEGER(s)]),void 0!==E&&(void 0!==i?n(E[INTEGER(i)]):void 0!==r?n(E[E.length-INTEGER(r)-1]):void 0!==a&&n(E[INTEGER(E.length/2)+INTEGER(a)]))})}}}),global.CONTEXT=CLASS({init:function(e,t,n){"use strict";var o,i,r,a,u,c,s,d,l,f,E,v,g,m,h,A,T,S=n.getEl().getContext("2d");t.drawImg=o=function(e){var t=e.img,n=void 0===e.x?0:e.x,o=void 0===e.y?0:e.y,i=void 0!==e.clipX?e.clipX:0,r=void 0!==e.clipY?e.clipY:0,a=e.clipWidth,u=e.clipHeight,c=e.width,s=e.height,d=t.checkIsX2()===!0?2:1;void 0===a&&void 0===u?c>0&&s>0?S.drawImage(t.getEl(),n,o,c,s):S.drawImage(t.getEl(),n,o):(void 0===a&&(a=t.getWidth()),void 0===u&&(u=t.getHeight()),S.drawImage(t.getEl(),i*d,r*d,a*d,u*d,n,o,c,s))},t.getImageData=i=function(e){var t=void 0===e||void 0===e.x?0:e.x,o=void 0===e||void 0===e.y?0:e.y,i=void 0===e||void 0===e.width?n.getWidth():e.width,r=void 0===e||void 0===e.height?n.getHeight():e.height;return S.getImageData(t,o,i,r)},t.createImageData=r=function(e){var t=e.width,n=e.height;return S.createImageData(t,n)},t.putImageData=a=function(e){var t=e.data,n=void 0===e.x?0:e.x,o=void 0===e.y?0:e.y;S.putImageData(t,n,o)},t.setScale=u=function(e){var t=e.scaleWidth,n=e.scaleHeight;S.scale(t,n)},t.rotate=c=function(e){var t=e.centerX,n=e.centerY,o=e.degree;S.translate(t,n),S.rotate(o*Math.PI/180),S.translate(-t,-n)},t.save=s=function(){S.save()},t.restore=d=function(){S.restore()},t.clear=l=function(){S.clearRect(0,0,n.getWidth(),n.getHeight())},t.beginPath=f=function(){S.beginPath()},t.closePath=E=function(){S.closePath()},t.moveTo=v=function(e){var t=e.x,n=e.y;S.moveTo(t,n)},t.lineTo=g=function(e){var t=e.x,n=e.y;S.lineTo(t,n)},t.strock=m=function(){S.strock()},t.setStrokeStyle=h=function(e){S.strokeStyle=e},t.fill=A=function(){S.fill()},t.setFillStyle=T=function(e){S.fillStyle=e}}}),global.EXPORT_IMG_DATA=METHOD(function(){"use strict";var e={},t={};return{run:function(n,o){var i,r=n.getSrc(),a=e[r],u=t[r];void 0!==a?o(a):void 0!==u?u.push(o):(u=t[r]=[o],i=IMG(),i.getContentEl().crossOrigin="anonymous",i.setSrc(r),EVENT_ONCE({node:i,name:"load"},function(n,o){var i,a=o.getWidth(),c=o.getHeight(),s=CANVAS({width:a,height:c}),d=s.getContext();d.drawImg({img:o}),i=d.getImageData(),e[r]=i,EACH(u,function(e){e(i)}),delete t[r]}))}}}),global.EXPORT_IMG_TYPE=METHOD(function(){"use strict";var e={},t={};return{run:function(n,o){var i=n.getSrc(),r=e[i],a=t[i];void 0!==r?o(r):void 0!==a?a.push(o):(a=t[i]=[o],ImageInfo.loadInfo(i,function(){var n=ImageInfo.getAllFields(i).format.toLowerCase();e[i]=n,EACH(a,function(e){e(n)}),delete t[i]}))}}}),global.X2=OBJECT({init:function(e,t){"use strict";var n,o,i,r,a={};t.checkIsCached=n=function(e){return void 0!==a[e]},o=function(e,t){var o=e.getSrc();n(o)===!0?t(a[o]):EXPORT_IMG_DATA(e,function(e){var n,i,r,u,c,s,d,l,f,E,v;for(i=e.width,r=e.height,u=e.data,c=CANVAS(),c.setSize({width:2*i,height:2*r}),s=c.getContext(),n=s.createImgData({width:2*i,height:2*r}),d=n.data,l=0;r>l;l+=1)for(f=0;i>f;f+=1)E=l*i*4+4*f,v=4*(4*l*i+2*f),d[v]=u[E],d[v+1]=u[E+1],d[v+2]=u[E+2],d[v+3]=u[E+3],d[v+4]=u[E],d[v+5]=u[E+1],d[v+6]=u[E+2],d[v+7]=u[E+3],v=4*(2*(2*l+1)*i+2*f),d[v]=u[E],d[v+1]=u[E+1],d[v+2]=u[E+2],d[v+3]=u[E+3],d[v+4]=u[E],d[v+5]=u[E+1],d[v+6]=u[E+2],d[v+7]=u[E+3];s.putImgData({data:n}),t(a[o]={x2DataURL:c.getDataURL(),width:i,height:r})})},t.switchImg=i=function(e){void 0!==e.getEl()&&o(e,function(t){var n,o,i;void 0!==e.getEl()&&(n=t.x2DataURL,o=e.getWidth(),i=e.getHeight(),(void 0===o||0>=o)&&(o=t.width),(void 0===i||0>=i)&&(i=t.height),void 0===e.getStyle("width")&&void 0===e.getStyle("height")&&e.setSize({width:o,height:i}),e.setX2Src(n))})},t.switchBG=r=function(e){var t=e.node,n=IMG({src:e.uri});o(n,function(e){var n=e.x2DataURL,o=t.getStyle("backgroundSize");(void 0===o||"initial"===o)&&(o=e.width+"px "+e.height+"px"),ADD_STYLE({node:t,style:{backgroundX2Image:n,backgroundSize:o}})})}}}),global.MSG=METHOD({run:function(e){"use strict";var t=e[INFO.getLang()];return void 0===t&&EACH(e,function(e){return t=e,!1}),t}}),/*!
  * Bowser - a browser detector
  * https://github.com/ded/bowser
  * MIT License | (c) Dustin Diaz 2014
  */
!function(e,t){"undefined"!=typeof module&&module.exports?module.exports.browser=t():"function"==typeof define&&define.amd?define(t):this[e]=t()}("bowser",function(){function e(e){function n(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function o(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}var i,r=n(/(ipod|iphone|ipad)/i).toLowerCase(),a=/like android/i.test(e),u=!a&&/android/i.test(e),c=n(/edge\/(\d+(\.\d+)?)/i),s=n(/version\/(\d+(\.\d+)?)/i),d=/tablet/i.test(e),l=!d&&/[^-]mobi/i.test(e);/opera|opr/i.test(e)?i={name:"Opera",opera:t,version:s||n(/(?:opera|opr)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?i={name:"Yandex Browser",yandexbrowser:t,version:s||n(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/windows phone/i.test(e)?(i={name:"Windows Phone",windowsphone:t},c?(i.msedge=t,i.version=c):(i.msie=t,i.version=n(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?i={name:"Internet Explorer",msie:t,version:n(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?i={name:"Microsoft Edge",msedge:t,version:c}:/chrome|crios|crmo/i.test(e)?i={name:"Chrome",chrome:t,version:n(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?(i={name:"iphone"==r?"iPhone":"ipad"==r?"iPad":"iPod"},s&&(i.version=s)):/sailfish/i.test(e)?i={name:"Sailfish",sailfish:t,version:n(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?i={name:"SeaMonkey",seamonkey:t,version:n(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel/i.test(e)?(i={name:"Firefox",firefox:t,version:n(/(?:firefox|iceweasel)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(i.firefoxos=t)):/silk/i.test(e)?i={name:"Amazon Silk",silk:t,version:n(/silk\/(\d+(\.\d+)?)/i)}:u?i={name:"Android",version:s}:/phantom/i.test(e)?i={name:"PhantomJS",phantom:t,version:n(/phantomjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?i={name:"BlackBerry",blackberry:t,version:s||n(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:/(web|hpw)os/i.test(e)?(i={name:"WebOS",webos:t,version:s||n(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(i.touchpad=t)):i=/bada/i.test(e)?{name:"Bada",bada:t,version:n(/dolfin\/(\d+(\.\d+)?)/i)}:/tizen/i.test(e)?{name:"Tizen",tizen:t,version:n(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||s}:/safari/i.test(e)?{name:"Safari",safari:t,version:s}:{name:n(/^(.*)\/(.*) /),version:o(/^(.*)\/(.*) /)},!i.msedge&&/(apple)?webkit/i.test(e)?(i.name=i.name||"Webkit",i.webkit=t,!i.version&&s&&(i.version=s)):!i.opera&&/gecko\//i.test(e)&&(i.name=i.name||"Gecko",i.gecko=t,i.version=i.version||n(/gecko\/(\d+(\.\d+)?)/i)),i.msedge||!u&&!i.silk?r&&(i[r]=t,i.ios=t):i.android=t;var f="";i.windowsphone?f=n(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r?(f=n(/os (\d+([_\s]\d+)*) like mac os x/i),f=f.replace(/[_\s]/g,".")):u?f=n(/android[ \/-](\d+(\.\d+)*)/i):i.webos?f=n(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):i.blackberry?f=n(/rim\stablet\sos\s(\d+(\.\d+)*)/i):i.bada?f=n(/bada\/(\d+(\.\d+)*)/i):i.tizen&&(f=n(/tizen[\/\s](\d+(\.\d+)*)/i)),f&&(i.osversion=f);var E=f.split(".")[0];return d||"ipad"==r||u&&(3==E||4==E&&!l)||i.silk?i.tablet=t:(l||"iphone"==r||"ipod"==r||u||i.blackberry||i.webos||i.bada)&&(i.mobile=t),i.msedge||i.msie&&i.version>=10||i.yandexbrowser&&i.version>=15||i.chrome&&i.version>=20||i.firefox&&i.version>=20||i.safari&&i.version>=6||i.opera&&i.version>=10||i.ios&&i.osversion&&i.osversion.split(".")[0]>=6||i.blackberry&&i.version>=10.1?i.a=t:i.msie&&i.version<10||i.chrome&&i.version<20||i.firefox&&i.version<20||i.safari&&i.version<6||i.opera&&i.version<10||i.ios&&i.osversion&&i.osversion.split(".")[0]<6?i.c=t:i.x=t,i}var t=!0,n=e("undefined"!=typeof navigator?navigator.userAgent:"");return n.test=function(e){for(var t=0;t<e.length;++t){var o=e[t];if("string"==typeof o&&o in n)return!0}return!1},n._detect=e,n});var BinaryFile=function(e,t,n){var o=e,i=t||0,r=0;this.getRawData=function(){return o},"string"==typeof e?(r=n||o.length,this.getByteAt=function(e){return 255&o.charCodeAt(e+i)}):"unknown"==typeof e&&(r=n||IEBinary_getLength(o),this.getByteAt=function(e){return IEBinary_getByteAt(o,e+i)}),this.getLength=function(){return r},this.getSByteAt=function(e){var t=this.getByteAt(e);return t>127?t-256:t},this.getShortAt=function(e,t){var n=t?(this.getByteAt(e)<<8)+this.getByteAt(e+1):(this.getByteAt(e+1)<<8)+this.getByteAt(e);return 0>n&&(n+=65536),n},this.getSShortAt=function(e,t){var n=this.getShortAt(e,t);return n>32767?n-65536:n},this.getLongAt=function(e,t){var n=this.getByteAt(e),o=this.getByteAt(e+1),i=this.getByteAt(e+2),r=this.getByteAt(e+3),a=t?(((n<<8)+o<<8)+i<<8)+r:(((r<<8)+i<<8)+o<<8)+n;return 0>a&&(a+=4294967296),a},this.getSLongAt=function(e,t){var n=this.getLongAt(e,t);return n>2147483647?n-4294967296:n},this.getStringAt=function(e,t){for(var n=[],o=e,i=0;e+t>o;o++,i++)n[i]=String.fromCharCode(this.getByteAt(o));return n.join("")},this.getCharAt=function(e){return String.fromCharCode(this.getByteAt(e))},this.toBase64=function(){return window.btoa(o)},this.fromBase64=function(e){o=window.atob(e)}},BinaryAjax=function(){function e(){var e=null;return window.XMLHttpRequest?e=new XMLHttpRequest:window.ActiveXObject&&(e=new ActiveXObject("Microsoft.XMLHTTP")),e}function t(t,n,o){var i=e();i?(n&&("undefined"!=typeof i.onload?i.onload=function(){"200"==i.status?n(this):o&&o(),i=null}:i.onreadystatechange=function(){4==i.readyState&&("200"==i.status?n(this):o&&o(),i=null)}),i.open("HEAD",t,!0),i.send(null)):o&&o()}function n(t,n,o,i,r){var a=e();if(a){var u=0;i&&!r&&(u=i[0]);var c=0;i&&(c=i[1]-i[0]+1),n&&("undefined"!=typeof a.onload?a.onload=function(){"200"==a.status||"206"==a.status?(this.binaryResponse=new BinaryFile(this.responseText,u,c),n(this)):o&&o(),a=null}:a.onreadystatechange=function(){4==a.readyState&&("200"==a.status||"206"==a.status?(this.binaryResponse=new BinaryFile(a.responseBody,u,c),n(this)):o&&o(),a=null)}),a.open("GET",t,!0),a.overrideMimeType&&a.overrideMimeType("text/plain; charset=x-user-defined"),i&&r&&a.setRequestHeader("Range","bytes="+i[0]+"-"+i[1]),a.send(null)}else o&&o()}return function(e,o,i,r){r?t(e,function(){}):n(e,o,i)}}();document.write("<script type='text/vbscript'>\r\nFunction IEBinary_getByteAt(strBinary, iOffset)\r\n	IEBinary_getByteAt = AscB(MidB(strBinary,iOffset+1,1))\r\nEnd Function\r\nFunction IEBinary_getLength(strBinary)\r\n	IEBinary_getLength = LenB(strBinary)\r\nEnd Function\r\n</script>\r\n");var EXIF={};!function(){function e(e,t,n){e.addEventListener?e.addEventListener(t,n,!1):e.attachEvent&&e.attachEvent("on"+t,n)}function t(e){return!!e.exifdata}function n(e,t){BinaryAjax(e.src,function(n){var i=o(n.binaryResponse);e.exifdata=i||{},t&&t()})}function o(e){if(255!=e.getByteAt(0)||216!=e.getByteAt(1))return!1;for(var t=2,n=e.getLength();n>t;){if(255!=e.getByteAt(t))return c&&console.log("Not a valid marker at offset "+t+", found: "+e.getByteAt(t)),!1;var o=e.getByteAt(t+1);if(22400==o)return c&&console.log("Found 0xFFE1 marker"),a(e,t+4,e.getShortAt(t+2,!0)-2);if(225==o)return c&&console.log("Found 0xFFE1 marker"),a(e,t+4,e.getShortAt(t+2,!0)-2);t+=2+e.getShortAt(t+2,!0)}}function i(e,t,n,o,i){for(var a=e.getShortAt(n,i),u={},s=0;a>s;s++){var d=n+12*s+2,l=o[e.getShortAt(d,i)];!l&&c&&console.log("Unknown tag: "+e.getShortAt(d,i)),u[l]=r(e,d,t,n,i)}return u}function r(e,t,n,o,i){var r=e.getShortAt(t+2,i),a=e.getLongAt(t+4,i),u=e.getLongAt(t+8,i)+n;switch(r){case 1:case 7:if(1==a)return e.getByteAt(t+8,i);for(var c=a>4?u:t+8,s=[],d=0;a>d;d++)s[d]=e.getByteAt(c+d);return s;case 2:var l=a>4?u:t+8;return e.getStringAt(l,a-1);case 3:if(1==a)return e.getShortAt(t+8,i);for(var c=a>2?u:t+8,s=[],d=0;a>d;d++)s[d]=e.getShortAt(c+2*d,i);return s;case 4:if(1==a)return e.getLongAt(t+8,i);for(var s=[],d=0;a>d;d++)s[d]=e.getLongAt(u+4*d,i);return s;case 5:if(1==a)return e.getLongAt(u,i)/e.getLongAt(u+4,i);for(var s=[],d=0;a>d;d++)s[d]=e.getLongAt(u+8*d,i)/e.getLongAt(u+4+8*d,i);return s;case 9:if(1==a)return e.getSLongAt(t+8,i);for(var s=[],d=0;a>d;d++)s[d]=e.getSLongAt(u+4*d,i);return s;case 10:if(1==a)return e.getSLongAt(u,i)/e.getSLongAt(u+4,i);for(var s=[],d=0;a>d;d++)s[d]=e.getSLongAt(u+8*d,i)/e.getSLongAt(u+4+8*d,i);return s}}function a(e,t){if("Exif"!=e.getStringAt(t,4))return c&&console.log("Not valid EXIF data! "+e.getStringAt(t,4)),!1;var n,o=t+6;if(18761==e.getShortAt(o))n=!1;else{if(19789!=e.getShortAt(o))return c&&console.log("Not valid TIFF data! (no 0x4949 or 0x4D4D)"),!1;n=!0}if(42!=e.getShortAt(o+2,n))return c&&console.log("Not valid TIFF data! (no 0x002A)"),!1;if(8!=e.getLongAt(o+4,n))return c&&console.log("Not valid TIFF data! (First offset not 8)",e.getShortAt(o+4,n)),!1;var r=i(e,o,o+8,EXIF.TiffTags,n);if(r.ExifIFDPointer){var a=i(e,o,o+r.ExifIFDPointer,EXIF.Tags,n);for(var u in a){switch(u){case"LightSource":case"Flash":case"MeteringMode":case"ExposureProgram":case"SensingMethod":case"SceneCaptureType":case"SceneType":case"CustomRendered":case"WhiteBalance":case"GainControl":case"Contrast":case"Saturation":case"Sharpness":case"SubjectDistanceRange":case"FileSource":a[u]=EXIF.StringValues[u][a[u]];break;case"ExifVersion":case"FlashpixVersion":a[u]=String.fromCharCode(a[u][0],a[u][1],a[u][2],a[u][3]);break;case"ComponentsConfiguration":a[u]=EXIF.StringValues.Components[a[u][0]]+EXIF.StringValues.Components[a[u][1]]+EXIF.StringValues.Components[a[u][2]]+EXIF.StringValues.Components[a[u][3]]}r[u]=a[u]}}if(r.GPSInfoIFDPointer){var s=i(e,o,o+r.GPSInfoIFDPointer,EXIF.GPSTags,n);for(var u in s){switch(u){case"GPSVersionID":s[u]=s[u][0]+"."+s[u][1]+"."+s[u][2]+"."+s[u][3]}r[u]=s[u]}}return r}function u(){for(var t=document.getElementsByTagName("img"),n=0;n<t.length;n++)"true"==t[n].getAttribute("exif")&&(t[n].complete?EXIF.getData(t[n]):e(t[n],"load",function(){EXIF.getData(this)}))}var c=!1;EXIF.Tags={36864:"ExifVersion",40960:"FlashpixVersion",40961:"ColorSpace",40962:"PixelXDimension",40963:"PixelYDimension",37121:"ComponentsConfiguration",37122:"CompressedBitsPerPixel",37500:"MakerNote",37510:"UserComment",40964:"RelatedSoundFile",36867:"DateTimeOriginal",36868:"DateTimeDigitized",37520:"SubsecTime",37521:"SubsecTimeOriginal",37522:"SubsecTimeDigitized",33434:"ExposureTime",33437:"FNumber",34850:"ExposureProgram",34852:"SpectralSensitivity",34855:"ISOSpeedRatings",34856:"OECF",37377:"ShutterSpeedValue",37378:"ApertureValue",37379:"BrightnessValue",37380:"ExposureBias",37381:"MaxApertureValue",37382:"SubjectDistance",37383:"MeteringMode",37384:"LightSource",37385:"Flash",37396:"SubjectArea",37386:"FocalLength",41483:"FlashEnergy",41484:"SpatialFrequencyResponse",41486:"FocalPlaneXResolution",41487:"FocalPlaneYResolution",41488:"FocalPlaneResolutionUnit",41492:"SubjectLocation",41493:"ExposureIndex",41495:"SensingMethod",41728:"FileSource",41729:"SceneType",41730:"CFAPattern",41985:"CustomRendered",41986:"ExposureMode",41987:"WhiteBalance",41988:"DigitalZoomRation",41989:"FocalLengthIn35mmFilm",41990:"SceneCaptureType",41991:"GainControl",41992:"Contrast",41993:"Saturation",41994:"Sharpness",41995:"DeviceSettingDescription",41996:"SubjectDistanceRange",40965:"InteroperabilityIFDPointer",42016:"ImageUniqueID"},EXIF.TiffTags={256:"ImageWidth",257:"ImageHeight",34665:"ExifIFDPointer",34853:"GPSInfoIFDPointer",40965:"InteroperabilityIFDPointer",258:"BitsPerSample",259:"Compression",262:"PhotometricInterpretation",274:"Orientation",277:"SamplesPerPixel",284:"PlanarConfiguration",530:"YCbCrSubSampling",531:"YCbCrPositioning",282:"XResolution",283:"YResolution",296:"ResolutionUnit",273:"StripOffsets",278:"RowsPerStrip",279:"StripByteCounts",513:"JPEGInterchangeFormat",514:"JPEGInterchangeFormatLength",301:"TransferFunction",318:"WhitePoint",319:"PrimaryChromaticities",529:"YCbCrCoefficients",532:"ReferenceBlackWhite",306:"DateTime",270:"ImageDescription",271:"Make",272:"Model",305:"Software",315:"Artist",33432:"Copyright"},EXIF.GPSTags={0:"GPSVersionID",1:"GPSLatitudeRef",2:"GPSLatitude",3:"GPSLongitudeRef",4:"GPSLongitude",5:"GPSAltitudeRef",6:"GPSAltitude",7:"GPSTimeStamp",8:"GPSSatellites",9:"GPSStatus",10:"GPSMeasureMode",11:"GPSDOP",12:"GPSSpeedRef",13:"GPSSpeed",14:"GPSTrackRef",15:"GPSTrack",16:"GPSImgDirectionRef",17:"GPSImgDirection",18:"GPSMapDatum",19:"GPSDestLatitudeRef",20:"GPSDestLatitude",21:"GPSDestLongitudeRef",22:"GPSDestLongitude",23:"GPSDestBearingRef",24:"GPSDestBearing",25:"GPSDestDistanceRef",26:"GPSDestDistance",27:"GPSProcessingMethod",28:"GPSAreaInformation",29:"GPSDateStamp",30:"GPSDifferential"},EXIF.StringValues={ExposureProgram:{0:"Not defined",1:"Manual",2:"Normal program",3:"Aperture priority",4:"Shutter priority",5:"Creative program",6:"Action program",7:"Portrait mode",8:"Landscape mode"},MeteringMode:{0:"Unknown",1:"Average",2:"CenterWeightedAverage",3:"Spot",4:"MultiSpot",5:"Pattern",6:"Partial",255:"Other"},LightSource:{0:"Unknown",1:"Daylight",2:"Fluorescent",3:"Tungsten (incandescent light)",4:"Flash",9:"Fine weather",10:"Cloudy weather",11:"Shade",12:"Daylight fluorescent (D 5700 - 7100K)",13:"Day white fluorescent (N 4600 - 5400K)",14:"Cool white fluorescent (W 3900 - 4500K)",15:"White fluorescent (WW 3200 - 3700K)",17:"Standard light A",18:"Standard light B",19:"Standard light C",20:"D55",21:"D65",22:"D75",23:"D50",24:"ISO studio tungsten",255:"Other"},Flash:{0:"Flash did not fire",1:"Flash fired",5:"Strobe return light not detected",7:"Strobe return light detected",9:"Flash fired, compulsory flash mode",13:"Flash fired, compulsory flash mode, return light not detected",15:"Flash fired, compulsory flash mode, return light detected",16:"Flash did not fire, compulsory flash mode",24:"Flash did not fire, auto mode",25:"Flash fired, auto mode",29:"Flash fired, auto mode, return light not detected",31:"Flash fired, auto mode, return light detected",32:"No flash function",65:"Flash fired, red-eye reduction mode",69:"Flash fired, red-eye reduction mode, return light not detected",71:"Flash fired, red-eye reduction mode, return light detected",73:"Flash fired, compulsory flash mode, red-eye reduction mode",77:"Flash fired, compulsory flash mode, red-eye reduction mode, return light not detected",79:"Flash fired, compulsory flash mode, red-eye reduction mode, return light detected",89:"Flash fired, auto mode, red-eye reduction mode",93:"Flash fired, auto mode, return light not detected, red-eye reduction mode",95:"Flash fired, auto mode, return light detected, red-eye reduction mode"},SensingMethod:{1:"Not defined",2:"One-chip color area sensor",3:"Two-chip color area sensor",4:"Three-chip color area sensor",5:"Color sequential area sensor",7:"Trilinear sensor",8:"Color sequential linear sensor"},SceneCaptureType:{0:"Standard",1:"Landscape",2:"Portrait",3:"Night scene"},SceneType:{1:"Directly photographed"},CustomRendered:{0:"Normal process",1:"Custom process"},WhiteBalance:{0:"Auto white balance",1:"Manual white balance"},GainControl:{0:"None",1:"Low gain up",2:"High gain up",3:"Low gain down",4:"High gain down"},Contrast:{0:"Normal",1:"Soft",2:"Hard"},Saturation:{0:"Normal",1:"Low saturation",2:"High saturation"},Sharpness:{0:"Normal",1:"Soft",2:"Hard"},SubjectDistanceRange:{0:"Unknown",1:"Macro",2:"Close view",3:"Distant view"},FileSource:{3:"DSC"},Components:{0:"",1:"Y",2:"Cb",3:"Cr",4:"R",5:"G",6:"B"}},EXIF.getData=function(e,o){return e.complete?(t(e)?o&&o():n(e,o),!0):!1},EXIF.getTag=function(e,n){return t(e)?e.exifdata[n]:void 0},EXIF.pretty=function(e){if(!t(e))return"";var n=e.exifdata,o="";for(var i in n)n.hasOwnProperty(i)&&(o+="object"==typeof n[i]?i+" : ["+n[i].length+" values]\r\n":i+" : "+n[i]+"\r\n");return o},EXIF.readFromBinaryFile=function(e){return o(e)},e(window,"load",u)}();var ImageInfo={};ImageInfo.useRange=!1,ImageInfo.range=10240,function(){function e(e,n){BinaryAjax(e,function(o){var i=t(o.binaryResponse),r=o.getResponseHeader("Content-Type");i.mimeType=r,i.byteSize=o.fileSize,a[e]=i,n&&n()},null,ImageInfo.useRange?[0,ImageInfo.range]:null)}function t(e){return 255==e.getByteAt(0)&&216==e.getByteAt(1)?i(e):137!=e.getByteAt(0)&&48!=e.getByteAt(0)||"PNG"!=e.getStringAt(1,3)?"GIF"==e.getStringAt(0,3)?o(e):66==e.getByteAt(0)&&77==e.getByteAt(1)?r(e):0==e.getByteAt(0)&&0==e.getByteAt(1)?readICOInfo(e):{format:"UNKNOWN"}:n(e)}function n(e){var t=e.getLongAt(16,!0),n=e.getLongAt(20,!0),o=e.getByteAt(24),i=e.getByteAt(25),r=o;4==i&&(r*=2),2==i&&(r*=3),6==i&&(r*=4);var a=e.getByteAt(25)>=4;return{format:"PNG",version:"",width:t,height:n,bpp:r,alpha:a,exif:{}}}function o(e){var t=e.getStringAt(3,3),n=e.getShortAt(6),o=e.getShortAt(8),i=(e.getByteAt(10)>>4&7)+1;return{format:"GIF",version:t,width:n,height:o,bpp:i,alpha:!1,exif:{}}}function i(e){for(var t=0,n=0,o=0,i=e.getLength(),r=2;i>r;){var a=e.getShortAt(r,!0);if(r+=2,65472==a){n=e.getShortAt(r+3,!0),t=e.getShortAt(r+5,!0),o=e.getByteAt(r+7,!0);break}r+=e.getShortAt(r,!0)}var u={};return"undefined"!=typeof EXIF&&EXIF.readFromBinaryFile&&(u=EXIF.readFromBinaryFile(e)),{format:"JPEG",version:"",width:t,height:n,bpp:8*o,alpha:!1,exif:u}}function r(e){var t=e.getLongAt(18),n=e.getLongAt(22),o=e.getShortAt(28);return{format:"BMP",version:"",width:t,height:n,bpp:o,alpha:!1,exif:{}}}var a=[];ImageInfo.loadInfo=function(t,n){a[t]?n&&n():e(t,n)},ImageInfo.getAllFields=function(e){if(!a[e])return null;var t={};for(var n in a[e])a[e].hasOwnProperty(n)&&(t[n]=a[e][n]);return t},ImageInfo.getField=function(e,t){return a[e]?a[e][t]:null}}(),global.DELETE=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(e)===!0?e:{uri:e},{method:"DELETE"}]),t)}}),FOR_BOX(function(e){"use strict";e.DELETE=METHOD({run:function(t,n){e.REQUEST(COMBINE([t,{method:"DELETE"}]),n)}})}),global.GET=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(e)===!0?e:{uri:e},{method:"GET"}]),t)}}),FOR_BOX(function(e){"use strict";e.GET=METHOD({run:function(t,n){e.REQUEST(COMBINE([t,{method:"GET"}]),n)}})}),global.POST=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(e)===!0?e:{uri:e},{method:"POST"}]),t)}}),FOR_BOX(function(e){"use strict";e.POST=METHOD({run:function(t,n){e.REQUEST(COMBINE([t,{method:"POST"}]),n)}})}),global.PUT=METHOD({run:function(e,t){"use strict";REQUEST(COMBINE([CHECK_IS_DATA(e)===!0?e:{uri:e},{method:"PUT"}]),t)}}),FOR_BOX(function(e){"use strict";e.PUT=METHOD({run:function(t,n){e.REQUEST(COMBINE([t,{method:"PUT"}]),n)}})}),global.REQUEST=METHOD({run:function(e,t){"use strict";var n,o,i,r,a=void 0===e.host?BROWSER_CONFIG.host:e.host,u=void 0===e.port?void 0===e.host?BROWSER_CONFIG.port:80:e.port,c=e.isSecure,s=e.method,d=e.uri,l=e.paramStr,f=e.data;s=s.toUpperCase(),void 0!==d&&-1!==d.indexOf("?")&&(l=d.substring(d.indexOf("?")+1)+(void 0===l?"":"&"+l),d=d.substring(0,d.indexOf("?"))),void 0!==f&&(l=(void 0===l?"":l+"&")+"__DATA="+encodeURIComponent(STRINGIFY(f))),l=(void 0===l?"":l+"&")+Date.now(),CHECK_IS_DATA(t)!==!0?n=t:(n=t.success,o=t.error),i=(c===!0?"https://":"http://")+a+":"+u+"/"+(void 0===d?"":"/"===d[0]?d.substring(1):d),r=new XMLHttpRequest,r.onreadystatechange=function(){var t;4===r.readyState&&(200===r.status?n(r.responseText):(t={code:r.status},void 0!==o?o(t):console.log("[UPPERCASE.JS-REQUEST] REQUEST FAILED:",e,t)))},"GET"===s?(r.open(s,i+"?"+l),r.send()):(r.open(s,i),r.setRequestHeader("Content-type","application/x-www-form-urlencoded"),r.send(l))}}),FOR_BOX(function(e){"use strict";e.REQUEST=METHOD({run:function(t,n){REQUEST(COMBINE([t,{uri:e.boxName+"/"+t.uri}]),n)}})}),global.GO=METHOD({run:function(e){"use strict";history.pushState(void 0,void 0,HREF(e)),MATCH_VIEW.checkAll()}}),FOR_BOX(function(e){"use strict";e.GO=METHOD({run:function(t){GO((e.boxName===CONFIG.defaultBoxName?"":e.boxName+"/")+t)}})}),global.GO_NEW_WIN=METHOD({run:function(e){"use strict";global.open(HREF(e))}}),FOR_BOX(function(e){"use strict";e.GO_NEW_WIN=METHOD({run:function(t){GO_NEW_WIN((e.boxName===CONFIG.defaultBoxName?"":e.boxName+"/")+t)}})}),global.HREF=METHOD({run:function(e){"use strict";return"/"+e}}),FOR_BOX(function(e){"use strict";e.HREF=METHOD({run:function(t){return HREF((e.boxName===CONFIG.defaultBoxName?"":e.boxName+"/")+(void 0===t?"":t))}})}),global.MATCH_VIEW=METHOD(function(e){"use strict";var t,n=[];return e.checkAll=t=function(){EACH(n,function(e){e()})},{run:function(e){var t,o,i=e.uri,r=e.excludeURI,a=e.target,u=URI_MATCHER(i),c=void 0===r?void 0:URI_MATCHER(r),s=function(){var e,n,i=URI();i===REFRESH.getRefreshingURI()||(e=u.check(i)).checkIsMatched()!==!0||void 0!==r&&c.check(i).checkIsMatched()===!0?void 0!==t&&(t.close(),t=void 0,a.lastView=void 0):(n=e.getURIParams(),void 0===t?(t=a(),t.changeParams(n),a.lastView=t,o=n):CHECK_ARE_SAME([o,n])!==!0&&(t.changeParams(n),o=n),t.runURIChangeHandlers(i))};n.push(s),EVENT("popstate",function(){s()}),s()}}}),FOR_BOX(function(e){"use strict";e.MATCH_VIEW=METHOD({run:function(t){var n=t.uri,o=t.excludeURI,i=t.target,r=[],a=[],u=function(t){e.boxName===CONFIG.defaultBoxName&&r.push(t),r.push(e.boxName+"/"+t)},c=function(t){e.boxName===CONFIG.defaultBoxName&&a.push(t),a.push(e.boxName+"/"+t)};CHECK_IS_ARRAY(n)===!0?EACH(n,u):u(n),void 0!==o&&(CHECK_IS_ARRAY(o)===!0?EACH(o,c):c(o)),MATCH_VIEW({uri:r,excludeURI:a,target:i})}})}),global.REFRESH=METHOD(function(e){"use strict";var t,n="__REFRESHING";return e.getRefreshingURI=t=function(){return n},{run:function(e){var t=void 0!==e?e:location.pathname.substring(1);history.pushState(void 0,void 0,"/"+n),MATCH_VIEW.checkAll(),history.replaceState(void 0,void 0,"/"+t),MATCH_VIEW.checkAll()}}}),FOR_BOX(function(e){"use strict";e.REFRESH=METHOD({run:function(t){REFRESH((e.boxName===CONFIG.defaultBoxName?"":e.boxName+"/")+(void 0===t?"":t))}})}),global.URI=METHOD({run:function(){"use strict";return decodeURIComponent(location.pathname.substring(1))}}),global.VIEW=CLASS({init:function(e,t){"use strict";var n,o,i,r,a,u,c,s=!1,d=[],l=[],f=[];e.on=i=function(e,t){"paramsChange"===e&&(d.push(t),void 0!==n&&t(n)),"uriChange"===e?(l.push(t),void 0!==o&&t(o)):"close"===e&&f.push(t)},t.changeParams=r=function(e){n=e,EACH(d,function(t){t(e)})},t.runURIChangeHandlers=a=function(e){o=e,EACH(l,function(t){t(e)})},t.close=u=function(){EACH(f,function(e){e()}),s=!0},e.checkIsClosed=c=function(){return s},scrollTo(0,0)}}),global.SCROLL_LEFT=METHOD({run:function(){"use strict";return global.pageXOffset}}),global.SCROLL_TOP=METHOD({run:function(){"use strict";return global.pageYOffset}}),global.TITLE=METHOD({run:function(e){"use strict";document.title=e}}),global.WIN_HEIGHT=METHOD({run:function(){"use strict";return document.documentElement.clientHeight}}),global.WIN_WIDTH=METHOD({run:function(){"use strict";return document.documentElement.clientWidth}}),BOX("UPPERCASE.IO"),global.CONNECT_TO_WEB_SOCKET_SERVER=METHOD({run:function(e,t){"use strict";var n,o,i,r,a,u,c,s,d=void 0===e.host?BROWSER_CONFIG.host:e.host,l=e.port,f={},E=0;CHECK_IS_DATA(t)!==!0?n=t:(n=t.success,o=t.error),s=function(e,t,n){var o=f[e];void 0!==o&&EACH(o,function(e){e(t,function(e){void 0!==c&&void 0!==n&&c({methodName:"__CALLBACK_"+n,data:e})})})},i=new WebSocket("ws://"+d+":"+l),i.onopen=function(){r=!0,n(a=function(e,t){var n=f[e];void 0===n&&(n=f[e]=[]),n.push(t)},u=function(e,t){var n=f[e];void 0!==n&&(void 0!==t?REMOVE({array:n,value:t}):delete f[e])},c=function(e,t){var n="__CALLBACK_"+E;e.sendKey=E,E+=1,i.send(STRINGIFY(e)),void 0!==t&&a(n,function(e){t(e),u(n)})},function(){i.close()})},i.onmessage=function(e){var t=PARSE_STR(e.data);void 0!==t&&s(t.methodName,t.data,t.sendKey)},i.onclose=function(){s("__DISCONNECTED")},i.onerror=function(e){var t=e.toString();r!==!0?void 0!==o?o(t):console.log("[UPPERCASE.IO-CONNECT_TO_WEB_SOCKET_SERVER] CONNECT TO WEB SOCKET SERVER FAILED: "+t):s("__ERROR",t)}}}),FOR_BOX(function(e){"use strict";e.ROOM=CLASS({init:function(t,n,o){var i,r,a,u,c,s,d,l,f,E={};CHECK_IS_DATA(o)!==!0?r=e.boxName+"/"+o:(i=o.roomServerName,r=e.boxName+"/"+o.name),CONNECT_TO_ROOM_SERVER.enterRoom({roomServerName:i,roomName:r}),t.getRoomName=u=function(){return r},t.checkIsExited=c=function(){return a},n.on=s=function(e,t){var n=E[e];CONNECT_TO_ROOM_SERVER.on({roomServerName:i,methodName:r+"/"+e},t),void 0===n&&(n=E[e]=[]),n.push(t)},n.off=d=function(e,t){var n=E[e];void 0!==n&&(void 0!==t?(CONNECT_TO_ROOM_SERVER.off({roomServerName:i,methodName:r+"/"+e},t),REMOVE({array:n,value:t}),0===n.length&&delete E[e]):(EACH(n,function(t){CONNECT_TO_ROOM_SERVER.off({roomServerName:i,methodName:r+"/"+e},t)}),delete E[e]))},n.send=l=function(e,t){a!==!0?CONNECT_TO_ROOM_SERVER.send({roomServerName:i,methodName:r+"/"+e.methodName,data:e.data},t):console.log("[UPPERCASE.IO-ROOM] `ROOM.send` ERROR! ROOM EXITED!")},n.exit=f=function(){a!==!0&&(CONNECT_TO_ROOM_SERVER.exitRoom({roomServerName:i,roomName:r}),EACH(E,function(e,t){d(t)}),E=void 0,a=!0)}}})}),global.CONNECT_TO_ROOM_SERVER=METHOD(function(e){"use strict";var t,n,o,i,r,a,u="__",c={},s={},d={},l={},f={},E={},v={};return e.checkIsConnected=t=function(e){return void 0===e&&(e=u),void 0===l[e]&&(l[e]=!1),l[e]},e.enterRoom=n=function(e){var t,n=e.roomServerName,o=e.roomName;void 0===n&&(n=u),t=c[n],void 0===t&&(t=c[n]=[]),t.push(o),void 0!==v[n]&&v[n]({methodName:"__ENTER_ROOM",data:o})},e.on=o=function(e,t){var n,o=e.roomServerName,i=e.methodName;void 0===o&&(o=u),n=s[o],void 0===n&&(n=s[o]=[]),n.push({methodName:i,method:t}),void 0!==f[o]&&f[o](i,t)},e.off=i=function(e,t){var n,o=e.roomServerName,i=e.methodName;void 0===o&&(o=u),n=s[o],void 0!==E[o]&&E[o](i,t),void 0!==n&&(void 0!==t?REMOVE(n,function(e){return e.methodName===i&&e.method===t}):REMOVE(n,function(e){return e.methodName===i}),0===n.length&&delete s[o])},e.send=r=function(e,t){var n,o=e.roomServerName,i=e.methodName,r=e.data;void 0===o&&(o=u),void 0===v[o]?(n=d[o],void 0===n&&(n=d[o]=[]),n.push({params:{methodName:i,data:r},callback:t})):v[o]({methodName:i,data:r},t)},e.exitRoom=a=function(e){var t,n=e.roomServerName,o=e.roomName;void 0===n&&(n=u),t=c[n],void 0===t&&(t=c[n]=[]),void 0!==v[n]&&v[n]({methodName:"__EXIT_ROOM",data:o}),EACH(t,function(e,n){return e===o?(REMOVE({array:t,key:n}),!1):void 0})},{run:function(e,t){var n,o,i=e.name;void 0===i&&(i=u),void 0!==t&&(CHECK_IS_DATA(t)!==!0?n=t:(n=t.success,o=t.error)),CONNECT_TO_WEB_SOCKET_SERVER({host:e.host,port:e.port,fixRequestURI:e.fixRequestURI},{error:o,success:function(e,t,o){var r=c[i],a=s[i],u=d[i];f[i]=e,E[i]=t,v[i]=o,void 0!==r&&EACH(r,function(e){o({methodName:"__ENTER_ROOM",data:e})}),void 0!==a&&EACH(a,function(t){e(t.methodName,t.method)}),void 0!==u&&EACH(u,function(e){o(e.params,e.callback)}),delete d[i],void 0!==n&&n(e,t,o),l[i]=!0,e("__DISCONNECTED",function(){delete f[i],delete E[i],delete v[i],l[i]=!1})}})}}}),FOR_BOX(function(e){"use strict";e.MODEL=CLASS({init:function(t,n){var o;n.getBoxName=o=function(){return e.boxName}}})}),FOR_BOX(function(e){"use strict";OVERRIDE(e.MODEL,function(t){e.MODEL=CLASS(function(n){var o,i={},r=0;return n.getOnNewInfos=o=function(){return i},{preset:function(){return t},init:function(t,n,o){var a,u,c,s,d,l,f,E,v,g,m,h,A,T,S,p,C,O,I,_,R,D,N,b,y,H,M,L,F=o.roomServerName,P=o.name,w=o.initData,x=o.methodConfig,B=(o.isNotUsingObjectId,e.ROOM({roomServerName:F,name:P}));void 0!==x&&(a=x.create,u=x.get,c=x.update,s=x.remove,d=x.find,l=x.count,f=x.checkIsExists,void 0!==a&&(E=a.valid),void 0!==c&&(v=c.valid)),n.getName=g=function(){return P},n.getInitData=m=function(){return w},n.getCreateValid=h=function(){return E},n.getUpdateValid=A=function(){return v},n.getRoom=T=function(){return B},a!==!1&&(n.create=S=function(t,n){var o,i,r,a,u;void 0!==n&&(CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notValid,r=n.notAuthed,a=n.error)),void 0!==w&&EACH(w,function(e,n){t[n]=e}),void 0!==E&&(u=E.check(t)),void 0!==u&&u.checkHasError()===!0?void 0!==i?i(u.getErrors()):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/create` NOT VALID!: ",u.getErrors()):B.send({methodName:"create",data:t},function(t){var n,u,c,s;void 0!==t?(n=t.errorMsg,u=t.validErrors,c=t.isNotAuthed,s=t.savedData,void 0!==n?void 0!==a?a(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/create` ERROR: "+n):void 0!==u?void 0!==i?i(u):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/create` NOT VALID!: ",u):c===!0?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/create` NOT AUTHED!"):void 0!==o&&o(s)):void 0!==o&&o()})}),u!==!1&&(n.get=p=function(t,n){var o,i,r,a;CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notExists,r=n.notAuthed,a=n.error),B.send({methodName:"get",data:t},function(t){var n,u,c;void 0!==t&&(n=t.errorMsg,u=t.isNotAuthed,c=t.savedData),void 0!==n?void 0!==a?a(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/get` ERROR: "+n):u===!0?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/get` NOT AUTHED!"):void 0===c?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/get` NOT EXISTS!"):void 0!==o&&o(c)})},n.getWatching=C=function(t,o){var i,r,a,u,c,s;return CHECK_IS_DATA(o)!==!0?i=o:(i=o.success,r=o.notExists,a=o.notAuthed,u=o.error),n.get(t,{success:function(t){var n;c!==!0&&void 0!==i&&(s=e.ROOM({roomServerName:F,name:P+"/"+t.id}),i(t,function(e){s.on("update",e)},function(e){s.on("remove",function(t){e(t),n()})},n=function(){void 0!==s&&(s.exit(),s=void 0)}))},notExists:r,notAuthed:a,error:u}),OBJECT({init:function(e,t){var n;t.exit=n=function(){void 0!==s&&s.exit(),c=!0}}})}),c!==!1&&(n.update=O=function(t,n){var o,i,r,a,u,c,s,d,l,f,E=t.id,g=t.$inc,m=t.$push,h=t.$pull;void 0!==n&&(CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notValid,r=n.notExists,a=n.notAuthed,u=n.error)),void 0!==v&&(c=v.checkForUpdate(t),void 0!==g&&(s=v.checkForUpdate(g)),void 0!==m&&(d=v.checkForUpdate(RUN(function(){var e={};return EACH(m,function(t,n){e[n]=[t]}),e}))),void 0!==h&&(l=v.checkForUpdate(RUN(function(){var e={};return EACH(h,function(t,n){e[n]=[t]}),e})))),t.id=E,t.$inc=g,t.$push=m,t.$pull=h,void 0!==v&&(c.checkHasError()===!0||void 0!==s&&s.checkHasError()===!0||void 0!==d&&d.checkHasError()===!0||void 0!==l&&l.checkHasError()===!0)?(f=COMBINE([c.getErrors(),void 0===s?{}:s.getErrors(),void 0===d?{}:d.getErrors(),void 0===l?{}:l.getErrors()]),void 0!==i?i(f):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/update` NOT VALID!: ",f)):B.send({methodName:"update",data:t},function(t){var n,c,s,d,l;void 0!==t&&(n=t.errorMsg,c=t.validErrors,s=t.isNotAuthed,d=t.savedData,l=t.originData),void 0!==n?void 0!==u?u(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/update` ERROR: "+n):void 0!==c?void 0!==i?i(c):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/update` NOT VALID!: ",c):s===!0?void 0!==a?a():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/update` NOT AUTHED!"):void 0===d?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/update` NOT EXISTS!"):void 0!==o&&o(d,l)})}),s!==!1&&(n.remove=I=function(t,n){var o,i,r,a;void 0!==n&&(CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notExists,r=n.notAuthed,a=n.error)),B.send({methodName:"remove",data:t},function(t){var n,u,c;void 0!==t&&(n=t.errorMsg,u=t.isNotAuthed,c=t.originData),void 0!==n?void 0!==a?a(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/remove` ERROR: "+n):u===!0?void 0!==r?r():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/remove` NOT AUTHED!"):void 0===c?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/remove` NOT EXISTS!"):void 0!==o&&o(c)})}),d!==!1&&(n.find=_=function(t,n){var o,i,r;void 0===n&&(n=t,t=void 0),CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notAuthed,r=n.error),B.send({methodName:"find",data:t},function(t){var n=t.errorMsg,a=t.isNotAuthed,u=t.savedDataSet;void 0!==n?void 0!==r?r(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/find` ERROR: "+n):a===!0?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/find` NOT AUTHED!"):void 0!==o&&o(u)})},n.findWatching=R=function(t,o){var i,r,a,u,c={};return void 0===o&&(o=t,t=void 0),CHECK_IS_DATA(o)!==!0?i=o:(i=o.success,r=o.notAuthed,a=o.error),n.find(t,{success:function(t){var n;u!==!0&&void 0!==i&&(EACH(t,function(t){var n=t.id;c[n]=e.ROOM({roomServerName:F,name:P+"/"+n})}),i(t,function(e,t){c[e].on("update",t)
},function(e,t){c[e].on("remove",function(o){t(o),n(e)})},n=function(e){void 0!==c[e]&&(c[e].exit(),delete c[e])}))},notAuthed:r,error:a}),OBJECT({init:function(e,t){var n;t.exit=n=function(){EACH(c,function(e){e.exit()}),u=!0}}})}),l!==!1&&(n.count=D=function(t,n){var o,i,r;void 0===n&&(n=t,t=void 0),CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notAuthed,r=n.error),B.send({methodName:"count",data:t},function(t){var n=t.errorMsg,a=t.isNotAuthed,u=t.count;void 0!==n?void 0!==r?r(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/count` ERROR: "+n):a===!0?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/count` NOT AUTHED!"):void 0!==o&&o(u)})}),f!==!1&&(n.checkIsExists=N=function(t,n){var o,i,r;void 0===n&&(n=t,t=void 0),CHECK_IS_DATA(n)!==!0?o=n:(o=n.success,i=n.notAuthed,r=n.error),B.send({methodName:"checkIsExists",data:t},function(t){var n=t.errorMsg,a=t.isNotAuthed,u=t.isExists;void 0!==n?void 0!==r?r(n):console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/checkIsExists` ERROR: "+n):a===!0?void 0!==i?i():console.log("[UPPERCASE.IO-MODEL] `"+e.boxName+"."+P+"/checkIsExists` NOT AUTHED!"):void 0!==o&&o(u)})}),n.onNew=b=function(t,n){var o,a=r;return r+=1,void 0===n?(n=t,t=void 0,(o=e.ROOM({roomServerName:F,name:P+"/create"})).on("create",function(e){i[a].lastCreateTime=e.createTime,n(e)})):void 0===t?(o=e.ROOM({roomServerName:F,name:P+"/create"})).on("create",function(e){i[a].lastCreateTime=e.createTime,n(e)}):EACH(t,function(r,u){return(o=e.ROOM({roomServerName:F,name:P+"/"+u+"/"+r+"/create"})).on("create",function(e){EACH(t,function(t,n){return e[n]!==t?!1:void 0})===!0&&(i[a].lastCreateTime=e.createTime,n(e))}),!1}),i[a]={findMissingDataSet:function(){void 0!==i[a].lastCreateTime&&void 0!==_&&_({filter:void 0!==t?COMBINE([t,{createTime:{$gt:i[a].lastCreateTime}}]):{createTime:{$gt:i[a].lastCreateTime}}},REVERSE_EACH(n))}},OBJECT({init:function(e,t){var n;t.exit=n=function(){delete i[a],void 0!==o&&o.exit()}}})},n.onNewWatching=y=function(t,n){var o,a=r,u=[],c=function(t){var o,i,r=t.id;u.push(o=e.ROOM({roomServerName:F,name:P+"/"+r})),n(t,function(e){o.on("update",e)},function(e){o.on("remove",function(t){e(t),i()})},i=function(){o.exit(),REMOVE({array:u,value:o})})};return r+=1,void 0===n?(n=t,t=void 0,(o=e.ROOM({roomServerName:F,name:P+"/create"})).on("create",function(e){i[a].lastCreateTime=e.createTime,c(e)})):void 0===t?(o=e.ROOM({roomServerName:F,name:P+"/create"})).on("create",function(e){i[a].lastCreateTime=e.createTime,c(e)}):EACH(t,function(n,r){return(o=e.ROOM({roomServerName:F,name:P+"/"+r+"/"+n+"/create"})).on("create",function(e){EACH(t,function(t,n){return e[n]!==t?!1:void 0})===!0&&(i[a].lastCreateTime=e.createTime,c(e))}),!1}),i[a]={findMissingDataSet:function(){void 0!==i[a].lastCreateTime&&void 0!==_&&_({filter:void 0!==t?COMBINE([t,{createTime:{$gt:i[a].lastCreateTime}}]):{createTime:{$gt:i[a].lastCreateTime}}},REVERSE_EACH(c))}},OBJECT({init:function(e,t){var n;t.exit=n=function(){delete i[a],void 0!==o&&o.exit(),EACH(u,function(e){e.exit()})}}})},d!==!1&&(n.onNewAndFind=H=function(e,t){var n,o,i,r,a,u,c,s,d,l,f;return void 0===t&&(t=e,e=void 0),void 0!==e&&(n=e.properties,o=e.filter,i=e.sort,r=e.start,a=e.count,u=e.isNotOnNew),CHECK_IS_DATA(t)!==!0?s=t:(s=t.handler,d=t.success,l=t.notAuthed,f=t.error),u!==!0&&(c=b(n,function(e){s(e,!0)})),_({filter:COMBINE([n,o]),sort:i,start:r,count:a},{success:function(e){void 0!==d&&d(e),REVERSE_EACH(e,function(e){s(e,!1)})},notAuthed:l,error:f}),OBJECT({init:function(e,t){var n;t.exit=n=function(){void 0!==c&&c.exit()}}})},n.onNewAndFindWatching=M=function(e,t){var n,o,i,r,a,u,c,s,d,l,f,E;return void 0===t&&(t=e,e=void 0),void 0!==e&&(n=e.properties,o=e.filter,i=e.sort,r=e.start,a=e.count,u=e.isNotOnNew),CHECK_IS_DATA(t)!==!0?d=t:(d=t.handler,l=t.success,f=t.notAuthed,E=t.error),u!==!0&&(c=y(n,function(e,t,n,o){d(e,t,n,o,!0)})),s=R({filter:COMBINE([n,o]),sort:i,start:r,count:a},{success:function(e,t,n,o){void 0!==l&&l(e,t,n,o),REVERSE_EACH(e,function(e){d(e,function(n){t(e.id,n)},function(t){n(e.id,t)},function(){o(e.id)},!1)})},notAuthed:f,error:E}),OBJECT({init:function(e,t){var n;t.exit=n=function(){void 0!==c&&c.exit(),s.exit()}}})}),n.onRemove=L=function(t,n){var o;return void 0===n?(n=t,(o=e.ROOM({roomServerName:F,name:P+"/remove"})).on("remove",n)):EACH(t,function(i,r){return(o=e.ROOM({roomServerName:F,name:P+"/"+r+"/"+i+"/remove"})).on("remove",function(e){EACH(t,function(t,n){return e[n]!==t?!1:void 0})===!0&&n(e)}),!1}),OBJECT({init:function(e,t){var n;t.exit=n=function(){void 0!==o&&o.exit()}}})}}}})})}),FOR_BOX(function(e){"use strict";e.R=METHOD(function(t){var n,o;return t.setBasePath=o=function(e){n=e},{run:function(t,o){var i=e.boxName+"/R/"+t;return void 0!==CONFIG.version&&(i+="?version="+CONFIG.version),void 0!==n&&(i=n+"/"+i),"file:"!==location.protocol&&(i="/"+i),void 0!==o&&GET(i,o),i}}})}),FOR_BOX(function(e){"use strict";e.RF=METHOD({run:function(t){return(BROWSER_CONFIG.isSecure===!0?"https:":"http:")+"//"+BROWSER_CONFIG.host+":"+BROWSER_CONFIG.port+"/__RF/"+e.boxName+"/"+t}})}),global.SERVER_TIME=METHOD(function(e){"use strict";var t,n=0;return e.setDiff=t=function(e){n=e},{run:function(e){return new Date(e.getTime()-n)}}}),global.SYNC_TIME=METHOD({run:function(){"use strict";var e=UPPERCASE.IO.ROOM("timeSyncRoom"),t=new Date;e.send({methodName:"sync",data:t},function(e){TIME.setDiff(e),SERVER_TIME.setDiff(e)})}}),global.TIME=METHOD(function(e){"use strict";var t,n=0;return e.setDiff=t=function(e){n=e},{run:function(e){return new Date(e.getTime()+n)}}}),global.CONNECT_TO_IO_SERVER=METHOD({run:function(e,t){"use strict";var n,o,i,r,a;void 0===t?void 0!==e&&(CHECK_IS_DATA(e)!==!0?r=e:(n=e.roomServerName,o=e.webServerHost,i=e.webServerPort,r=e.success,a=e.error)):(void 0!==e&&(n=e.roomServerName,o=e.webServerHost,i=e.webServerPort),CHECK_IS_DATA(t)!==!0?r=t:(r=t.success,a=t.error)),void 0===o&&(o=BROWSER_CONFIG.host),void 0===i&&(i=CONFIG.webServerPort),GET({host:o,port:i,uri:"__WEB_SOCKET_SERVER_HOST",paramStr:"defaultHost="+o},{error:a,success:function(e){CONNECT_TO_ROOM_SERVER({name:n,host:e,port:i,fixRequestURI:"__WEB_SOCKET_FIX"},function(e,t,n){FOR_BOX(function(e){EACH(e.MODEL.getOnNewInfos(),function(e){e.findMissingDataSet()})}),e("__DISCONNECTED",function(){FOR_BOX(function(e){EACH(e.MODEL.getOnNewInfos(),function(e){e.lastCreateTime=SERVER_TIME(new Date)})})}),void 0!==r&&r(e,t,n)})}})}});